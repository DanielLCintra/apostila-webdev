<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Aula 07 - Docker + Swagger</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container">
        <header>
            <a href="index.html" class="back-link">‚Üê Voltar ao Menu</a>
            <h1>Aula 07 - Docker + Swagger</h1>
            <p class="subtitle">Containeriza√ß√£o e documenta√ß√£o de API</p>
        </header>

        <div class="content">
            <section class="section">
                <h2>üìö Conectando com as Aulas Anteriores</h2>
                <div class="concept-box">
                    <p>
                        Nas <strong>Aulas 03 a 06</strong>, voc√™ criou APIs REST completas com Spring Boot, JPA, 
                        DTOs e valida√ß√µes. Agora vamos aprender a <strong>containerizar sua aplica√ß√£o</strong> com 
                        Docker e <strong>documentar sua API</strong> com Swagger, ferramentas essenciais para 
                        desenvolvimento profissional.
                    </p>
                    <p>
                        <strong>O que voc√™ j√° sabe:</strong> Spring Boot, APIs REST, JPA, DTOs, valida√ß√µes
                    </p>
                    <p>
                        <strong>O que vamos aprender agora:</strong> Como gerar um JAR execut√°vel, como criar 
                        Dockerfiles, como usar Docker para rodar sua aplica√ß√£o, e como documentar sua API com Swagger
                    </p>
                </div>
            </section>

            <section class="section">
                <h2>üì¶ Gerando o JAR</h2>
                
                <div class="step-box">
                    <h3>1. Build do Projeto</h3>
                    <ol>
                        <li>No terminal, na raiz do projeto:</li>
                        <li><code>mvn clean package</code></li>
                        <li>Ou no IntelliJ: Maven ‚Üí Lifecycle ‚Üí clean ‚Üí package</li>
                        <li>O JAR ser√° gerado em: <code>target/nome-do-projeto.jar</code></li>
                    </ol>
                </div>

                <div class="step-box">
                    <h3>2. Executar JAR</h3>
                    <div class="code-block">
<pre># Executar o JAR gerado
java -jar target/minha-api-0.0.1-SNAPSHOT.jar

# Ou com perfil espec√≠fico
java -jar target/minha-api-0.0.1-SNAPSHOT.jar --spring.profiles.active=prod</pre>
                    </div>
                </div>
            </section>

            <section class="section">
                <h2>üê≥ Docker - Containeriza√ß√£o</h2>
                
                <div class="concept-box">
                    <h3>O que √© Docker? (Para Iniciantes)</h3>
                    <p>
                        <strong>Docker</strong> √© uma plataforma que permite criar, executar e gerenciar containers. 
                        Um container √© como uma "caixa" que cont√©m sua aplica√ß√£o e tudo que ela precisa para rodar.
                    </p>
                    
                    <h4>Por que usar Docker?</h4>
                    <ul>
                        <li><strong>"Funciona na minha m√°quina":</strong> Com Docker, funciona em qualquer m√°quina</li>
                        <li><strong>Isolamento:</strong> Cada container √© independente</li>
                        <li><strong>Consist√™ncia:</strong> Mesmo ambiente em desenvolvimento e produ√ß√£o</li>
                        <li><strong>F√°cil deploy:</strong> Basta executar o container</li>
                        <li><strong>Escalabilidade:</strong> F√°cil criar m√∫ltiplas inst√¢ncias</li>
                    </ul>

                    <div class="tip-box">
                        <strong>üí° Analogia:</strong> Docker √© como uma "m√°quina virtual leve". 
                        Mas ao inv√©s de virtualizar um sistema operacional completo, 
                        containers compartilham o kernel do sistema operacional, sendo muito mais leves e r√°pidos.
                    </div>

                    <h4>Conceitos Importantes:</h4>
                    <ul>
                        <li><strong>Image (Imagem):</strong> Template read-only usado para criar containers</li>
                        <li><strong>Container:</strong> Inst√¢ncia execut√°vel de uma imagem</li>
                        <li><strong>Dockerfile:</strong> Arquivo de texto com instru√ß√µes para construir uma imagem</li>
                        <li><strong>Docker Compose:</strong> Ferramenta para definir e executar m√∫ltiplos containers</li>
                    </ul>
                </div>

                <div class="step-box">
                    <h3>Instalar Docker</h3>
                    <p>Se voc√™ ainda n√£o tem Docker instalado:</p>
                    <ul>
                        <li><strong>Windows/Mac:</strong> Baixe <a href="https://www.docker.com/products/docker-desktop" target="_blank">Docker Desktop</a></li>
                        <li><strong>Linux:</strong> <code>sudo apt install docker.io docker-compose</code></li>
                        <li>Verifique: <code>docker --version</code></li>
                    </ul>
                </div>

                <div class="step-box">
                    <h3>1. Criar Dockerfile</h3>
                    <p>Crie o arquivo <code>Dockerfile</code> na raiz do projeto:</p>
                    
                    <div class="code-block">
<pre># Dockerfile
# Etapa 1: Build
FROM maven:3.8.6-openjdk-17 AS build
WORKDIR /app
COPY pom.xml .
COPY src ./src
RUN mvn clean package -DskipTests

# Etapa 2: Runtime
FROM openjdk:17-jre-slim
WORKDIR /app
COPY --from=build /app/target/*.jar app.jar

# Expor porta
EXPOSE 8080

# Comando para executar
ENTRYPOINT ["java", "-jar", "app.jar"]</pre>
                    </div>
                </div>

                <div class="step-box">
                    <h3>2. Build da Imagem Docker</h3>
                    <div class="code-block">
<pre># Build da imagem
docker build -t minha-api:1.0 .

# Verificar imagem criada
docker images</pre>
                    </div>
                </div>

                <div class="step-box">
                    <h3>3. Executar Container</h3>
                    <div class="code-block">
<pre># Executar container
docker run -d -p 8080:8080 --name minha-api-container minha-api:1.0

# Ver logs
docker logs minha-api-container

# Parar container
docker stop minha-api-container

# Remover container
docker rm minha-api-container</div>
                    </div>
                </div>

                <div class="tip-box">
                    <strong>üí° Comandos Docker √∫teis:</strong>
                    <ul>
                        <li><code>docker ps</code> - Lista containers em execu√ß√£o</li>
                        <li><code>docker ps -a</code> - Lista todos os containers</li>
                        <li><code>docker logs &lt;container&gt;</code> - Ver logs</li>
                        <li><code>docker exec -it &lt;container&gt; bash</code> - Entrar no container</li>
                    </ul>
                </div>
            </section>

            <section class="section">
                <h2>üìö Swagger - Documenta√ß√£o de API</h2>
                
                <div class="step-box">
                    <h3>1. Adicionar Depend√™ncia</h3>
                    <div class="code-block">
<pre>&lt;dependency&gt;
    &lt;groupId&gt;org.springdoc&lt;/groupId&gt;
    &lt;artifactId&gt;springdoc-openapi-starter-webmvc-ui&lt;/artifactId&gt;
    &lt;version&gt;2.2.0&lt;/version&gt;
&lt;/dependency&gt;</pre>
                    </div>
                </div>

                <div class="concept-box">
                    <h3>2. Configura√ß√£o B√°sica</h3>
                    <div class="code-block">
<pre>package com.exemplo.config;

import io.swagger.v3.oas.models.OpenAPI;
import io.swagger.v3.oas.models.info.Info;
import org.springframework.context.annotation.Bean;
import org.springframework.context.annotation.Configuration;

@Configuration
public class SwaggerConfig {
    
    @Bean
    public OpenAPI customOpenAPI() {
        return new OpenAPI()
            .info(new Info()
                .title("Minha API")
                .version("1.0.0")
                .description("Documenta√ß√£o da API REST"));
    }
}</pre>
                    </div>
                </div>

                <div class="concept-box">
                    <h3>3. Anotar Controllers</h3>
                    <div class="code-block">
<pre>import io.swagger.v3.oas.annotations.Operation;
import io.swagger.v3.oas.annotations.tags.Tag;
import io.swagger.v3.oas.annotations.responses.ApiResponse;

@RestController
@RequestMapping("/usuarios")
@Tag(name = "Usu√°rios", description = "Endpoints para gerenciamento de usu√°rios")
public class UsuarioController {
    
    @GetMapping
    @Operation(summary = "Listar usu√°rios", 
               description = "Retorna lista de todos os usu√°rios cadastrados")
    @ApiResponse(responseCode = "200", description = "Lista retornada com sucesso")
    public List&lt;UsuarioResponseDTO&gt; listar() {
        return usuarioService.listarTodos();
    }
    
    @PostMapping
    @Operation(summary = "Criar usu√°rio", 
               description = "Cria um novo usu√°rio no sistema")
    @ApiResponse(responseCode = "201", description = "Usu√°rio criado com sucesso")
    @ApiResponse(responseCode = "400", description = "Dados inv√°lidos")
    public ResponseEntity&lt;UsuarioResponseDTO&gt; criar(
            @Valid @RequestBody CriarUsuarioDTO dto) {
        // ...
    }
}</pre>
                    </div>
                </div>

                <div class="step-box">
                    <h3>4. Acessar Swagger UI</h3>
                    <ol>
                        <li>Inicie a aplica√ß√£o</li>
                        <li>Acesse: <code>http://localhost:8080/swagger-ui.html</code></li>
                        <li>Ou: <code>http://localhost:8080/swagger-ui/index.html</code></li>
                        <li>Explore os endpoints e teste diretamente na interface</li>
                    </ol>
                </div>

                <div class="concept-box">
                    <h3>Configura√ß√£o Avan√ßada (application.properties)</h3>
                    <div class="code-block">
<pre># Swagger Configuration
springdoc.api-docs.path=/api-docs
springdoc.swagger-ui.path=/swagger-ui.html
springdoc.swagger-ui.operationsSorter=method
springdoc.swagger-ui.tagsSorter=alpha</pre>
                    </div>
                </div>
            </section>

            <section class="section">
                <h2>üîß Docker Compose (Opcional)</h2>
                
                <div class="concept-box">
                    <h3>docker-compose.yml</h3>
                    <p>Docker Compose facilita gerenciar m√∫ltiplos containers.</p>
                    
                    <div class="code-block">
<pre>version: '3.8'

services:
  app:
    build: .
    ports:
      - "8080:8080"
    environment:
      - SPRING_PROFILES_ACTIVE=prod
    depends_on:
      - db
  
  db:
    image: postgres:15
    environment:
      - POSTGRES_DB=minhaapi
      - POSTGRES_USER=admin
      - POSTGRES_PASSWORD=senha123
    ports:
      - "5432:5432"
    volumes:
      - postgres_data:/var/lib/postgresql/data

volumes:
  postgres_data:</pre>
                    </div>
                </div>

                <div class="step-box">
                    <h3>Comandos Docker Compose</h3>
                    <div class="code-block">
<pre># Subir todos os servi√ßos
docker-compose up -d

# Ver logs
docker-compose logs -f

# Parar servi√ßos
docker-compose down

# Rebuild e subir
docker-compose up --build</pre>
                    </div>
                </div>
            </section>

            <section class="section">
                <h2>üß† Mini-Desafio</h2>
                <div class="challenge-box">
                    <h3>Desafio: Dockerizar e Documentar API</h3>
                    <p><strong>Objetivo:</strong> Containerizar aplica√ß√£o e adicionar Swagger.</p>
                    
                    <h4>Requisitos:</h4>
                    <ol>
                        <li>Crie um <code>Dockerfile</code> para sua aplica√ß√£o</li>
                        <li>Build e execute a imagem Docker</li>
                        <li>Adicione Swagger ao projeto</li>
                        <li>Documente pelo menos 3 endpoints com anota√ß√µes</li>
                        <li>Acesse <code>http://localhost:8080/swagger-ui.html</code></li>
                        <li>Teste os endpoints diretamente no Swagger UI</li>
                    </ol>
                </div>
            </section>

            <section class="section">
                <h2>üí° Dicas Finais</h2>
                
                <div class="tip-box">
                    <ul>
                        <li><strong>Docker:</strong> Use multi-stage builds para imagens menores</li>
                        <li><strong>Swagger:</strong> Documente sempre que poss√≠vel - facilita integra√ß√£o</li>
                        <li><strong>JAR:</strong> Teste o JAR localmente antes de containerizar</li>
                        <li><strong>Vari√°veis de ambiente:</strong> Use para configura√ß√µes sens√≠veis</li>
                        <li><strong>.dockerignore:</strong> Crie para excluir arquivos desnecess√°rios do build</li>
                    </ul>
                </div>
            </section>

            <section class="section">
                <h2>‚úÖ Checklist da Aula 07</h2>
                <div class="challenge-box">
                    <p>Antes de ir para a pr√≥xima aula, certifique-se de que:</p>
                    <ul>
                        <li>‚úÖ Gerou JAR com mvn clean package</li>
                        <li>‚úÖ Executou o JAR com java -jar</li>
                        <li>‚úÖ Entendeu o que √© Docker e containers</li>
                        <li>‚úÖ Criou um Dockerfile para sua aplica√ß√£o</li>
                        <li>‚úÖ Buildou imagem Docker (docker build)</li>
                        <li>‚úÖ Executou container (docker run)</li>
                        <li>‚úÖ Adicionou SpringDoc OpenAPI ao projeto</li>
                        <li>‚úÖ Configurou Swagger e acessou /swagger-ui.html</li>
                        <li>‚úÖ Documentou endpoints com anota√ß√µes do Swagger</li>
                        <li>‚úÖ Testou endpoints diretamente no Swagger UI</li>
                        <li>‚úÖ Completou o mini-desafio de dockerizar e documentar</li>
                    </ul>
                </div>
            </section>

            <section class="section">
                <h2>üéâ Parab√©ns!</h2>
                <p>Voc√™ completou a <strong>Semana 1</strong>! Agora voc√™ tem uma base s√≥lida em Java e Spring Boot.</p>
                <p>Na pr√≥xima semana, vamos mergulhar em <strong>Arquitetura Hexagonal</strong> e pr√°ticas avan√ßadas!</p>
            </section>

            <nav class="lesson-nav">
                <a href="aula-06.html" class="nav-link">‚Üê Aula Anterior</a>
                <a href="index.html" class="nav-link">Menu Principal</a>
                <a href="aula-08.html" class="nav-link">Pr√≥xima Aula ‚Üí</a>
            </nav>
        </div>
    </div>
</body>
</html>

