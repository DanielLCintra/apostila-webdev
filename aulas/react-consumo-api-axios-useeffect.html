<!-- ==================== Aula React 8 - Consumo de API com axios e useEffect ==================== -->
<article class="lesson-content">
  <h2>
    <i class="fab fa-react"></i> React ‚Äì Consumo de API com axios e useEffect
  </h2>

  <div class="intro-box mb-5">
    <p>
      Nesta aula vamos evoluir nosso projeto de contatos da aula anterior (hooks
      extras) para integrar APIs externas usando <strong>axios</strong> e
      <strong>useEffect</strong>. Vamos transformar nossa aplica√ß√£o local em uma
      aplica√ß√£o que consome uma API real, implementa cache offline e
      sincroniza√ß√£o autom√°tica.
    </p>
    <ul>
      <li>
        ‚úÖ Evoluir projeto existente: partir do estado da aula de hooks extras
      </li>
      <li>‚úÖ Integrar MockAPI com axios para opera√ß√µes CRUD</li>
      <li>‚úÖ Manter otimiza√ß√µes existentes (useMemo, useCallback, useRef)</li>
      <li>‚úÖ Adicionar estados de loading/erro e feedback ao usu√°rio</li>
      <li>‚úÖ Implementar cache offline com localStorage</li>
      <li>‚úÖ Sincroniza√ß√£o autom√°tica quando voltar online</li>
    </ul>
  </div>

  <blockquote>
    <p>
      "APIs s√£o a ponte entre o frontend e o mundo real dos dados." - Axios Team
    </p>
  </blockquote>

  <div class="alert alert-info">
    <strong>Pr√©-requisito:</strong> Esta aula continua o projeto da aula
    anterior "React ‚Äì Hooks Extras". Certifique-se de ter o projeto base
    funcionando com useMemo, useCallback, useRef e o componente Statistics
    separado.
  </div>

  <div class="alert alert-success">
    <strong>Estrat√©gia de Evolu√ß√£o:</strong> Vamos evoluir o projeto existente
    de forma incremental:
    <ol>
      <li>
        ‚úÖ <strong>Manter tudo que j√° funciona:</strong> useMemo, useCallback,
        useRef, Statistics
      </li>
      <li>‚úÖ <strong>Adicionar axios:</strong> Configura√ß√£o e interceptors</li>
      <li>
        ‚úÖ <strong>Evoluir ContactForm:</strong> Integra√ß√£o com API mantendo
        foco autom√°tico
      </li>
      <li>
        ‚úÖ <strong>Evoluir HomePage:</strong> Carregamento da API + cache
        offline
      </li>
      <li>
        ‚úÖ <strong>Adicionar ConnectionStatus:</strong> Indicador visual de
        online/offline
      </li>
      <li>
        ‚úÖ <strong>Implementar cache service:</strong> Substituir localStorage
        direto
      </li>
    </ol>
  </div>

  <div class="alert alert-warning">
    <strong>Como ler os blocos de c√≥digo nesta aula:</strong>
    <ul>
      <li>
        Em cada se√ß√£o, mostraremos a
        <strong>vers√£o completa evolu√≠da</strong> dos componentes com
        coment√°rios indicando o que <strong>manter</strong> (‚úÖ MANTER) e o que
        <strong>adicionar/modificar</strong> (üÜï ADICIONAR/MODIFICAR).
      </li>
      <li>
        Foque nas partes marcadas com üÜï para entender as mudan√ßas espec√≠ficas
        de cada se√ß√£o.
      </li>
      <li>
        Ao final de cada se√ß√£o importante, h√° um bloco com o c√≥digo completo do
        arquivo para refer√™ncia.
      </li>
    </ul>
  </div>

  <!-- 1. Estado Atual do Projeto -->
  <section class="mb-5">
    <h3 class="section-title with-icon">
      <i class="fas fa-address-book"></i> 1. Estado Atual do Projeto
    </h3>

    <div class="card mb-4">
      <div class="card-body">
        <h4>1.1 Projeto Base da Aula Anterior</h4>
        <p>
          Vamos partir do projeto de contatos que j√° est√° otimizado com hooks
          extras:
        </p>

        <div class="text-center mb-4">
          <img
            src="assets/images/pagina_principal_contatos.png"
            alt="Projeto de Contatos Otimizado"
            class="img-fluid rounded shadow"
          />
          <p class="text-sm text-gray-600 mt-2">
            Projeto atual com useMemo, useCallback, useRef e componente
            Statistics
          </p>
        </div>

        <h5>Funcionalidades j√° implementadas (3 aulas):</h5>
        <ul>
          <li>
            <strong>Aula 5:</strong> Componentiza√ß√£o, navega√ß√£o, formul√°rios
          </li>
          <li><strong>Aula 6:</strong> localStorage, filtros, deploy Vercel</li>
          <li>
            <strong>Aula 7:</strong> useMemo, useCallback, useRef, Statistics
          </li>
          <li>‚úÖ Formul√°rio com foco autom√°tico (useRef)</li>
          <li>‚úÖ Lista filtrada otimizada (useMemo)</li>
          <li>‚úÖ Handlers memoizados (useCallback)</li>
          <li>‚úÖ Componente Statistics separado</li>
          <li>‚úÖ Persist√™ncia local com localStorage</li>
          <li>‚úÖ Navega√ß√£o para p√°gina de detalhes</li>
        </ul>

        <h5>Estrutura de componentes atual (ap√≥s 3 aulas):</h5>
        <pre><code class="language-plaintext">app/
‚îú‚îÄ‚îÄ page.js                    # P√°gina principal (evolu√≠da)
‚îú‚îÄ‚îÄ layout.js                  # Layout compartilhado
‚îú‚îÄ‚îÄ globals.css                # Estilos globais
‚îú‚îÄ‚îÄ contact/[id]/page.js       # P√°gina de detalhes (aula 5)
‚îú‚îÄ‚îÄ utils/
‚îÇ   ‚îú‚îÄ‚îÄ api.js                 # Configura√ß√£o do axios (novo)
‚îÇ   ‚îî‚îÄ‚îÄ cache.js               # Servi√ßo de cache (novo)
‚îî‚îÄ‚îÄ components/
    ‚îú‚îÄ‚îÄ ContactForm.jsx        # Formul√°rio (useRef + API)
    ‚îú‚îÄ‚îÄ ContactList.jsx        # Lista de contatos (estrutura original)
    ‚îú‚îÄ‚îÄ ContactItem.jsx        # Item individual (memo + navega√ß√£o)
    ‚îú‚îÄ‚îÄ FilterInput.jsx        # Campo de filtro (useRef)
    ‚îú‚îÄ‚îÄ Statistics.jsx         # Estat√≠sticas (separado)
    ‚îî‚îÄ‚îÄ ConnectionStatus.jsx   # Status de conex√£o (novo)</code></pre>
      </div>
    </div>
  </section>

  <!-- 2. Introdu√ß√£o √†s APIs -->
  <section class="mb-5">
    <h3 class="section-title with-icon">
      <i class="fas fa-cloud"></i> 2. Introdu√ß√£o √†s APIs
    </h3>
    <div class="card mb-4">
      <div class="card-body">
        <h4>2.1 O que √© uma API?</h4>
        <p>
          <strong>API (Application Programming Interface)</strong> √© uma
          interface que permite que diferentes sistemas se comuniquem. No
          contexto web, APIs REST permitem que nossa aplica√ß√£o React troque
          dados com servidores.
        </p>

        <h4>2.2 Por que evoluir para API?</h4>
        <p>
          Atualmente nosso projeto salva dados apenas no localStorage. Vamos
          evoluir para:
        </p>
        <ul>
          <li><strong>Persist√™ncia real:</strong> Dados salvos no servidor</li>
          <li>
            <strong>Compartilhamento:</strong> M√∫ltiplos usu√°rios acessam os
            mesmos dados
          </li>
          <li>
            <strong>Escalabilidade:</strong> Servidor pode processar muitas
            requisi√ß√µes
          </li>
          <li>
            <strong>Sincroniza√ß√£o:</strong> Dados atualizados em tempo real
          </li>
          <li><strong>Backup autom√°tico:</strong> Dados n√£o se perdem</li>
        </ul>

        <h4>2.3 API que vamos usar</h4>
        <p>
          Vamos usar o <strong>MockAPI.io</strong>, uma ferramenta gratuita que
          cria APIs REST fake para desenvolvimento e prototipa√ß√£o.
        </p>

        <div class="alert alert-success mt-3">
          <strong>Vantagens do MockAPI:</strong>
          <ul>
            <li>‚úÖ Gratuito e sem necessidade de cart√£o de cr√©dito</li>
            <li>
              ‚úÖ API REST completa com CRUD (Create, Read, Update, Delete)
            </li>
            <li>‚úÖ Dados persistem entre sess√µes</li>
            <li>‚úÖ Dispon√≠vel 24/7 online</li>
            <li>‚úÖ N√£o precisa configurar servidor local</li>
            <li>‚úÖ Ideal para aprendizado e prototipa√ß√£o</li>
          </ul>
        </div>
      </div>
    </div>
  </section>

  <!-- 2.1 Tutorial: Como Criar sua API no MockAPI -->
  <section class="mb-5">
    <h3 class="section-title with-icon">
      <i class="fas fa-graduation-cap"></i> 2.1 Tutorial: Como Criar sua API no
      MockAPI
    </h3>
    <div class="card mb-4">
      <div class="card-body">
        <div class="alert alert-warning">
          <strong>üìù Siga este tutorial passo a passo</strong> para criar sua
          pr√≥pria API MockAPI ou use a API j√° configurada do projeto:
          <code>https://68d96d1b90a75154f0da61ae.mockapi.io</code>
        </div>

        <h4>Passo 1: Acessar o MockAPI.io</h4>
        <ol>
          <li>
            Acesse
            <a
              href="https://mockapi.io"
              target="_blank"
              rel="noopener noreferrer"
              >https://mockapi.io</a
            >
          </li>
          <li>
            Clique em <strong>"Get Started"</strong> ou
            <strong>"Sign Up"</strong>
          </li>
          <li>Fa√ßa login com sua conta do Google ou GitHub (gratuito)</li>
        </ol>

        <div class="text-center my-4">
          <div class="alert alert-info">
            <i class="fas fa-info-circle"></i> <strong>Dica:</strong> Use sua
            conta do GitHub ou Google para fazer login rapidamente
          </div>
        </div>

        <h4>Passo 2: Criar um Novo Projeto</h4>
        <ol>
          <li>Ap√≥s fazer login, voc√™ ver√° a tela de "Projects"</li>
          <li>Clique em <strong>"+ New Project"</strong></li>
          <li>
            Digite um nome para o projeto, por exemplo:
            <code>Contatos React</code>
          </li>
          <li>Clique em <strong>"Create"</strong></li>
        </ol>

        <div class="alert alert-success mt-3">
          <strong>‚úÖ Projeto criado!</strong> Agora voc√™ ver√° sua URL base da
          API, algo como:<br />
          <code>https://[SEU-ID-√öNICO].mockapi.io</code>
        </div>

        <h4>Passo 3: Criar o Endpoint "contacts"</h4>
        <p>Agora vamos criar o endpoint para gerenciar nossos contatos:</p>

        <ol>
          <li>
            Dentro do seu projeto, clique em <strong>"+ New Resource"</strong>
          </li>
          <li>
            No campo <strong>"Resource name"</strong>, digite:
            <code>contacts</code>
          </li>
          <li>
            Deixe marcada a op√ß√£o <strong>"Generate REST endpoints"</strong>
          </li>
          <li>Clique em <strong>"Create"</strong></li>
        </ol>

        <div class="alert alert-info mt-3">
          <strong>üìã Endpoints gerados automaticamente:</strong>
          <ul>
            <li><code>GET /contacts</code> - Listar todos os contatos</li>
            <li>
              <code>GET /contacts/:id</code> - Buscar um contato espec√≠fico
            </li>
            <li><code>POST /contacts</code> - Criar novo contato</li>
            <li><code>PUT /contacts/:id</code> - Atualizar contato</li>
            <li><code>DELETE /contacts/:id</code> - Deletar contato</li>
          </ul>
        </div>

        <h4>Passo 4: Configurar os Campos (Schema)</h4>
        <p>Vamos definir a estrutura dos dados do contato:</p>

        <ol>
          <li>
            Clique no recurso <strong>"contacts"</strong> que acabou de criar
          </li>
          <li>Clique em <strong>"Schema"</strong> (aba no topo)</li>
          <li>Clique em <strong>"+ Add Field"</strong> para cada campo:</li>
        </ol>

        <div class="table-responsive mt-3">
          <table class="table table-bordered">
            <thead class="table-light">
              <tr>
                <th>Nome do Campo</th>
                <th>Tipo</th>
                <th>Descri√ß√£o</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td><code>nome</code></td>
                <td>String (text)</td>
                <td>Nome completo do contato</td>
              </tr>
              <tr>
                <td><code>email</code></td>
                <td>String (text)</td>
                <td>E-mail do contato</td>
              </tr>
              <tr>
                <td><code>telefone</code></td>
                <td>String (text)</td>
                <td>Telefone do contato</td>
              </tr>
            </tbody>
          </table>
        </div>

        <div class="alert alert-warning mt-3">
          <strong>‚ö†Ô∏è Importante:</strong> O campo <code>id</code> √© criado
          automaticamente pelo MockAPI. N√£o √© necess√°rio adicion√°-lo
          manualmente.
        </div>

        <h4>Passo 5: Adicionar Dados de Exemplo (Opcional)</h4>
        <p>Voc√™ pode adicionar alguns contatos de teste manualmente:</p>

        <ol>
          <li>Clique na aba <strong>"Data"</strong></li>
          <li>Clique em <strong>"+ Add"</strong></li>
          <li>Preencha os campos nome, email e telefone</li>
          <li>Clique em <strong>"Save"</strong></li>
          <li>Repita para adicionar mais contatos</li>
        </ol>

        <div class="alert alert-success mt-3">
          <strong>üí° Dica:</strong> Voc√™ tamb√©m pode gerar dados fake
          automaticamente usando a op√ß√£o <strong>"Generate Data"</strong> se
          dispon√≠vel.
        </div>

        <h4>Passo 6: Copiar a URL da API</h4>
        <ol>
          <li>Volte para a p√°gina principal do projeto</li>
          <li>
            Copie a URL base da API (algo como:
            <code>https://[SEU-ID].mockapi.io</code>)
          </li>
          <li>
            O endpoint completo ser√°:
            <code>https://[SEU-ID].mockapi.io/contacts</code>
          </li>
        </ol>

        <h4>Passo 7: Testar a API no Navegador</h4>
        <p>Antes de usar no React, vamos verificar se est√° funcionando:</p>

        <pre><code class="language-plaintext"># Cole esta URL no seu navegador (substitua [SEU-ID] pelo seu ID real):
https://[SEU-ID].mockapi.io/contacts

# Voc√™ deve ver uma resposta JSON com seus contatos, algo como:
[
  {
    "id": "1",
    "nome": "Jo√£o Silva",
    "email": "joao@email.com",
    "telefone": "(11) 99999-9999"
  }
]</code></pre>

        <div class="alert alert-success mt-4">
          <strong>üéâ Parab√©ns!</strong> Sua API MockAPI est√° pronta para ser
          usada no projeto React!
        </div>

        <h4>üìå Usando a API do Projeto (Alternativa)</h4>
        <p>
          Se preferir, voc√™ pode usar a API j√° configurada deste projeto para
          seguir a aula:
        </p>

        <div class="alert alert-info">
          <strong>API Pr√©-configurada:</strong><br />
          <code>https://68d96d1b90a75154f0da61ae.mockapi.io/contacts</code>
          <br /><br />
          <strong>Teste agora:</strong> Cole a URL acima no navegador para ver
          os dados!
        </div>

        <h4>üîß Dicas e Boas Pr√°ticas</h4>
        <ul>
          <li>
            <strong>Limite de requisi√ß√µes:</strong> O plano gratuito tem limite
            de 1.000 requisi√ß√µes por dia, suficiente para desenvolvimento
          </li>
          <li>
            <strong>Dados p√∫blicos:</strong> Lembre-se que os dados no MockAPI
            s√£o p√∫blicos, n√£o use informa√ß√µes sens√≠veis
          </li>
          <li>
            <strong>Backup:</strong> MockAPI mant√©m seus dados, mas √© sempre bom
            ter backup local durante desenvolvimento
          </li>
          <li>
            <strong>M√∫ltiplos projetos:</strong> Voc√™ pode criar quantos
            projetos quiser gratuitamente
          </li>
          <li>
            <strong>Documenta√ß√£o:</strong> MockAPI gera documenta√ß√£o autom√°tica
            da sua API
          </li>
        </ul>

        <h4>üöÄ Pr√≥ximos Passos</h4>
        <p>Agora que sua API est√° configurada, vamos:</p>
        <ol>
          <li>Configurar o axios no projeto React (se√ß√£o 3)</li>
          <li>Conectar nossos componentes √† API (se√ß√£o 4)</li>
          <li>Implementar cache e modo offline (se√ß√£o 6)</li>
        </ol>
      </div>
    </div>
  </section>

  <!-- 3. Configurando axios -->
  <section class="mb-5">
    <h3 class="section-title with-icon">
      <i class="fas fa-download"></i> 3. Configurando axios
    </h3>
    <div class="card mb-4">
      <div class="card-body">
        <h4>3.1 Instala√ß√£o do axios</h4>
        <p>
          O <strong>axios</strong> √© uma biblioteca popular para fazer
          requisi√ß√µes HTTP em JavaScript. √â mais poderoso que o
          <code>fetch</code> nativo.
        </p>

        <div class="code-header">Terminal</div>
        <pre><code class="language-bash">npm install axios --save</code></pre>

        <div class="alert alert-info mt-3">
          <strong>Por que usar --save?</strong> O axios √© uma
          <strong>depend√™ncia obrigat√≥ria</strong> do projeto. O flag
          <code>--save</code> garante que ele seja adicionado ao
          <code>package.json</code> para que outros desenvolvedores possam
          instalar todas as depend√™ncias com <code>npm install</code>.
        </div>

        <h4>3.2 Configura√ß√£o b√°sica</h4>
        <pre><code class="language-jsx">// utils/api.js
import axios from 'axios';

// Configura√ß√£o base do axios
const api = axios.create({
  baseURL: 'https://68d96d1b90a75154f0da61ae.mockapi.io', // MockAPI
  timeout: 10000, // 10 segundos (API online pode ser mais lenta)
  headers: {
    'Content-Type': 'application/json',
  },
});

export default api;</code></pre>

        <h4>3.3 Interceptors para tratamento global</h4>
        <pre><code class="language-jsx">// Adicionar interceptors para tratamento global
api.interceptors.request.use(
  (config) => {
    console.log('Enviando requisi√ß√£o:', config.url);
    return config;
  },
  (error) => {
    return Promise.reject(error);
  }
);

api.interceptors.response.use(
  (response) => {
    console.log('Resposta recebida:', response.status);
    return response;
  },
  (error) => {
    console.error('Erro na requisi√ß√£o:', error.message);
    return Promise.reject(error);
  }
);</code></pre>

        <h4>3.4 C√≥digos de Status HTTP</h4>
        <p>
          Toda resposta HTTP vem com um c√≥digo de status que indica o resultado
          da opera√ß√£o. No interceptor acima, vemos
          <code>response.status</code> sendo logado. √â fundamental entender
          esses c√≥digos para tratar adequadamente as respostas da API:
        </p>
        <img
          src="assets/images/http_codes.jpeg"
          alt="C√≥digos de Status HTTP"
          class="img-fluid mb-4"
        />
        <p>
          <strong>C√≥digos mais comuns em APIs REST:</strong>
        </p>
        <ul>
          <li><strong>200 OK:</strong> Requisi√ß√£o bem-sucedida (GET, PUT)</li>
          <li>
            <strong>201 Created:</strong> Recurso criado com sucesso (POST)
          </li>
          <li>
            <strong>204 No Content:</strong> Sucesso sem conte√∫do (DELETE)
          </li>
          <li>
            <strong>400 Bad Request:</strong> Erro na requisi√ß√£o (dados
            inv√°lidos)
          </li>
          <li><strong>401 Unauthorized:</strong> N√£o autenticado</li>
          <li><strong>403 Forbidden:</strong> Sem permiss√£o</li>
          <li><strong>404 Not Found:</strong> Recurso n√£o encontrado</li>
          <li><strong>500 Internal Server Error:</strong> Erro no servidor</li>
        </ul>
      </div>
    </div>
  </section>

  <!-- 4. useEffect para APIs -->
  <section class="mb-5">
    <h3 class="section-title with-icon">
      <i class="fas fa-sync"></i> 4. useEffect para APIs
    </h3>
    <div class="card mb-4">
      <div class="card-body">
        <h4>4.1 Padr√£o b√°sico de consumo de API</h4>
        <p>
          O <code>useEffect</code> √© ideal para fazer chamadas de API quando o
          componente √© montado ou quando depend√™ncias mudam. Vamos adaptar nosso
          projeto existente para carregar dados da API.
        </p>

        <pre><code class="language-jsx">// components/ContactList.jsx - ESTRUTURA ORIGINAL MANTIDA
import ContactItem from './ContactItem';

const ContactList = ({ items, onRemove }) => {
  return (
    &lt;section className="bg-white shadow rounded"&gt;
      &lt;div className="px-4 py-3 border-b"&gt;
        &lt;h2 className="font-medium text-gray-900"&gt;Contatos ({items.length})&lt;/h2&gt;
      &lt;/div&gt;
      &lt;ul className="divide-y"&gt;
        {items.length === 0 ? (
          &lt;li className="p-4 text-gray-500"&gt;Nenhum contato encontrado&lt;/li&gt;
        ) : (
          items.map((c) => (
            &lt;ContactItem key={c.id} contact={c} onRemove={onRemove} /&gt;
          ))
        )}
      &lt;/ul&gt;
    &lt;/section&gt;
  );
};

export default ContactList;</code></pre>

        <h4>4.2 Carregando Contatos da API no Componente</h4>
        <p>
          Vamos implementar a l√≥gica de API diretamente no componente principal
          <strong>app/page.js</strong>, mantendo tudo que j√° funciona e
          adicionando integra√ß√£o com API e cleanup para evitar memory leaks.
        </p>

        <div class="alert alert-warning mt-3">
          <strong>IMPORTANTE:</strong> Antes de continuar, certifique-se de ter
          criado o arquivo <code>utils/api.js</code> com a configura√ß√£o do axios
          da se√ß√£o anterior.
        </div>

        <h5>üìÅ Arquivo: app/page.js</h5>
        <p>
          <strong>Evolu√ß√£o completa:</strong> Manter tudo que j√° funciona + API
          + Cleanup
        </p>

        <pre><code class="language-jsx">// app/page.js - VERS√ÉO COMPLETA EVOLU√çDA
"use client";
import { useCallback, useEffect, useMemo, useState } from "react";
import ContactForm from "./components/ContactForm";
import ContactList from "./components/ContactList";
import FilterInput from "./components/FilterInput";
import Statistcs from "./components/Statistcs";
import api from './utils/api'; // üÜï ADICIONAR: Import da configura√ß√£o do axios

const HomePage = () => {
  // ‚úÖ MANTER: Estados existentes do projeto
  const [contacts, setContacts] = useState([]);
  const [filter, setFilter] = useState('');
  
  // üÜï ADICIONAR: Estados para API e UI
  const [loading, setLoading] = useState(true);
  const [error, setError] = useState(null);
  const [isOffline, setIsOffline] = useState(false);

  // üÜï SUBSTITUIR: useEffect de carregamento com API + fallback offline + CLEANUP
  useEffect(() => {
    let isMounted = true; // Flag para cleanup - evita memory leaks

    const loadContacts = async () => {
      try {
        if (isMounted) {
          setLoading(true);
          setError(null);
        }
        
        // Tentar carregar da API primeiro
        try {
          const response = await api.get('/contacts');
          if (isMounted) { // S√≥ atualizar se componente ainda estiver montado
            setContacts(response.data);
            // Manter localStorage como backup
            localStorage.setItem('contatos', JSON.stringify(response.data));
            setIsOffline(false);
          }
        } catch (apiError) {
          // Se API falhar, tentar carregar do localStorage
          if (isMounted) {
            const localData = localStorage.getItem('contatos');
            if (localData) {
              setContacts(JSON.parse(localData));
              setIsOffline(true);
              console.log('API offline, usando dados locais');
            } else {
              setError('Erro ao carregar contatos e sem dados locais dispon√≠veis.');
            }
          }
        }
      } catch (err) {
        if (isMounted) {
          setError('Erro ao carregar contatos');
        }
      } finally {
        if (isMounted) {
          setLoading(false);
        }
      }
    };

    loadContacts();

    // üÜï CLEANUP: Evitar memory leaks quando componente √© desmontado
    return () => {
      isMounted = false;
      console.log('Componente desmontado - cancelando requisi√ß√µes');
    };
  }, []);

  // ‚úÖ MANTER: Lista filtrada otimizada (useMemo da aula anterior)
  const filteredContacts = useMemo(() => {
    if (!filter.trim()) {
      return contacts;
    }
    
    return contacts.filter(contact =>
      contact.nome.toLowerCase().includes(filter.toLowerCase()) ||
      contact.email.toLowerCase().includes(filter.toLowerCase()) ||
      contact.telefone.includes(filter)
    );
  }, [contacts, filter]);

  // ‚úÖ MANTER: Estat√≠sticas memoizadas (useMemo da aula anterior)
  const stats = useMemo(() => {
    const total = contacts.length;
    const comEmail = contacts.filter(c => c.email).length;
    const comTelefone = contacts.filter(c => c.telefone).length;
    
    return {
      total,
      comEmail,
      comTelefone,
      semEmail: total - comEmail,
      semTelefone: total - comTelefone
    };
  }, [contacts]);

  // ‚úÖ MANTER: Handlers memoizados do projeto existente
  const handleSubmit = useCallback((newContact) => {
    setContacts(prev => [...prev, newContact]);
  }, []);

  // üÜï MODIFICAR: handleRemove com integra√ß√£o de API + fallback offline
  const handleRemove = useCallback(async (id) => {
    try {
      // Tentar excluir via API primeiro
      try {
        await api.delete(`/contacts/${id}`);
        console.log('Contato exclu√≠do da API');
      } catch (apiError) {
        // Se API falhar, apenas remover localmente
        console.log('API offline, removendo apenas localmente');
      }
      
      // Remover da lista local em ambos os casos
      setContacts(prev => {
        const updated = prev.filter(c => c.id !== id);
        // Atualizar cache
        localStorage.setItem('contatos', JSON.stringify(updated));
        return updated;
      });
    } catch (err) {
      console.error('Erro ao remover contato:', err);
    }
  }, []);

  const handleFilterChange = useCallback((value) => {
    setFilter(value);
  }, []);

  return (
    &lt;div className="min-h-screen bg-gray-200 p-6"&gt;
      &lt;div className="max-w-3xl mx-auto space-y-6"&gt;
        &lt;header className="flex items-center justify-between"&gt;
          &lt;h1 className="text-2xl font-bold text-gray-900"&gt;Cadastro de Contatos&lt;/h1&gt;
          &lt;div className="flex items-center space-x-4"&gt;
            &lt;FilterInput value={filter} onChange={handleFilterChange} /&gt;
            {/* üÜï ADICIONAR: Indicador de status offline */}
            {isOffline && (
              &lt;span className="text-orange-600 text-sm"&gt;
                &lt;i className="fas fa-exclamation-triangle"&gt;&lt;/i&gt; Offline
              &lt;/span&gt;
            )}
          &lt;/div&gt;
        &lt;/header&gt;

        &lt;ContactForm onAdd={handleSubmit} /&gt;

        {/* üÜï ADICIONAR: Estados de loading e erro */}
        {loading && (
          &lt;div className="text-center py-8"&gt;
            &lt;i className="fas fa-spinner fa-spin text-2xl text-blue-600"&gt;&lt;/i&gt;
            &lt;p className="mt-2"&gt;Carregando contatos...&lt;/p&gt;
          &lt;/div&gt;
        )}

        {error && (
          &lt;div className="text-center py-8"&gt;
            &lt;i className="fas fa-exclamation-circle text-2xl text-red-600"&gt;&lt;/i&gt;
            &lt;p className="mt-2 text-red-600"&gt;{error}&lt;/p&gt;
            &lt;button 
              onClick={() =&gt; window.location.reload()}
              className="mt-4 bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700"
            &gt;
              Tentar Novamente
            &lt;/button&gt;
          &lt;/div&gt;
        )}

        {/* üÜï ADICIONAR: Renderiza√ß√£o condicional da lista e estat√≠sticas */}
        {!loading && !error && (
          &lt;&gt;
            &lt;ContactList items={filteredContacts} onRemove={handleRemove} /&gt;
            &lt;Statistcs stats={stats} /&gt;
          &lt;/&gt;
        )}
      &lt;/div&gt;
    &lt;/div&gt;
  );
};

export default HomePage;</code></pre>

        <div class="alert alert-info mt-3">
          <strong>O que foi implementado:</strong>
          <ul>
            <li>
              ‚úÖ <strong>API Integration:</strong> Carregamento de dados da
              MockAPI com fallback para localStorage
            </li>
            <li>
              ‚úÖ <strong>Estados de UI:</strong> Loading, erro e indicador
              offline para melhor UX
            </li>
            <li>
              ‚úÖ <strong>Cleanup:</strong> Flag <code>isMounted</code> evita
              memory leaks quando componente √© desmontado
            </li>
            <li>
              ‚úÖ <strong>Mantido:</strong> useMemo, useCallback, useRef e todas
              as otimiza√ß√µes da aula anterior
            </li>
            <li>
              ‚úÖ <strong>Renderiza√ß√£o condicional:</strong> Lista e estat√≠sticas
              s√≥ aparecem quando n√£o h√° loading/erro
            </li>
          </ul>
        </div>
      </div>
    </div>
  </section>

  <!-- 5. Estados de Loading e Erro -->
  <section class="mb-5">
    <h3 class="section-title with-icon">
      <i class="fas fa-exclamation-triangle"></i> 5. Estados de Loading e Erro
    </h3>
    <div class="card mb-4">
      <div class="card-body">
        <h4>5.1 Estados de Loading e Erro no ContactForm</h4>
        <p>
          Vamos evoluir o ContactForm existente para integrar com a API,
          mantendo todas as funcionalidades j√° implementadas e adicionando
          estados de UI para melhor experi√™ncia do usu√°rio.
        </p>

        <div class="alert alert-info mt-3">
          <strong>Modifica√ß√µes Incrementais:</strong>
          <ul>
            <li>‚úÖ <strong>MANTER:</strong> useRef para foco autom√°tico</li>
            <li>
              ‚úÖ <strong>MANTER:</strong> Estados do formul√°rio (nome, email,
              telefone)
            </li>
            <li>‚úÖ <strong>MANTER:</strong> Valida√ß√£o e reset do formul√°rio</li>
            <li>üÜï <strong>ADICIONAR:</strong> Import do api (utils/api.js)</li>
            <li>üÜï <strong>ADICIONAR:</strong> Estados de loading e erro</li>
            <li>
              üÜï <strong>ADICIONAR:</strong> Integra√ß√£o com API + fallback
              offline
            </li>
            <li>
              üÜï <strong>ADICIONAR:</strong> Cleanup para evitar memory leaks
            </li>
          </ul>
        </div>
        <h5>üìÅ Arquivo: components/ContactForm.jsx</h5>
        <p>
          <strong>Evolu√ß√£o completa:</strong> Manter tudo que j√° funciona + API
          + Estados de UI
        </p>

        <pre><code class="language-jsx">// components/ContactForm.jsx - VERS√ÉO COMPLETA EVOLU√çDA
import { useEffect, useRef, useState } from "react";
import api from '../utils/api'; // üÜï ADICIONAR: Import da configura√ß√£o do axios

const ContactForm = ({ onAdd }) => {
  // ‚úÖ MANTER: Estados existentes do projeto
  const [form, setForm] = useState({ nome: "", email: "", telefone: "" });
  const nomeInputRef = useRef(null);
  
  // üÜï ADICIONAR: Estados para API e UI
  const [loading, setLoading] = useState(false);
  const [error, setError] = useState(null);

  // ‚úÖ MANTER: Foco autom√°tico do projeto existente
  useEffect(() => {
    nomeInputRef.current?.focus();
  }, []);

  // üÜï ADICIONAR: Cleanup opcional para evitar memory leaks
  useEffect(() => {
    return () => {
      console.log('ContactForm desmontado');
    };
  }, []);

  // ‚úÖ MANTER: handleChange existente
  const handleChange = (e) => {
    const { name, value } = e.target;
    setForm(prev => ({ ...prev, [name]: value }));
  };

  // üÜï SUBSTITUIR: handleSubmit com integra√ß√£o de API + fallback offline
  const handleSubmit = async (e) => {
    e.preventDefault();
    if (!form.nome.trim()) return; // Valida√ß√£o simples

    try {
      setLoading(true);
      setError(null);

      // Tentar salvar via API primeiro
      try {
        const response = await api.post('/contacts', form);
        // Se API funcionar, usar o ID retornado
        onAdd({ ...form, id: response.data.id });
      } catch (apiError) {
        // Se API falhar, salvar localmente
        console.log('API offline, salvando localmente');
        onAdd({ ...form, id: Date.now() });
      }
      
      setForm({ nome: "", email: "", telefone: "" });
      // Focar novamente no campo nome ap√≥s adicionar
      nomeInputRef.current?.focus();
      
    } catch (err) {
      setError('Erro ao adicionar contato');
    } finally {
      setLoading(false);
    }
  };

  return (
    &lt;form onSubmit={handleSubmit} className="bg-white shadow rounded p-4 space-y-4"&gt;
      &lt;div&gt;
        &lt;label className="block text-sm font-medium mb-1 text-gray-700"&gt;Nome&lt;/label&gt;
        &lt;input
          ref={nomeInputRef}
          name="nome"
          className="w-full border rounded px-3 py-2 text-gray-900"
          value={form.nome}
          onChange={handleChange}
          required
        /&gt;
      &lt;/div&gt;

      &lt;div&gt;
        &lt;label className="block text-sm font-medium mb-1 text-gray-700"&gt;Email&lt;/label&gt;
        &lt;input
          name="email"
          type="email"
          className="w-full border rounded px-3 py-2 text-gray-900"
          value={form.email}
          onChange={handleChange}
        /&gt;
      &lt;/div&gt;

      &lt;div&gt;
        &lt;label className="block text-sm font-medium mb-1 text-gray-700"&gt;Telefone&lt;/label&gt;
        &lt;input
          name="telefone"
          className="w-full border rounded px-3 py-2 text-gray-900"
          value={form.telefone}
          onChange={handleChange}
        /&gt;
      &lt;/div&gt;

      {/* üÜï ADICIONAR: Feedback de erro */}
      {error && (
        &lt;div className="text-red-600 text-sm"&gt;{error}&lt;/div&gt;
      )}

      {/* üÜï MODIFICAR: Bot√£o com estado de loading */}
      &lt;button 
        type="submit" 
        disabled={loading}
        className="bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded disabled:opacity-50"
      &gt;
        {loading ? 'Salvando...' : 'Adicionar Contato'}
      &lt;/button&gt;
    &lt;/form&gt;
  );
};

export default ContactForm;</code></pre>

        <div class="alert alert-info mt-3">
          <strong>O que foi implementado:</strong>
          <ul>
            <li>
              ‚úÖ <strong>Mantido:</strong> useRef para foco autom√°tico, estados
              do formul√°rio, valida√ß√£o
            </li>
            <li>
              üÜï <strong>Adicionado:</strong> Import do api, estados de
              loading/erro, integra√ß√£o com API
            </li>
            <li>
              üÜï <strong>Fallback offline:</strong> Se API falhar, salva
              localmente automaticamente
            </li>
            <li>
              üÜï <strong>Cleanup opcional:</strong> Para evitar memory leaks em
              formul√°rios complexos
            </li>
            <li>
              üÜï <strong>Feedback visual:</strong> Loading no bot√£o e mensagens
              de erro
            </li>
          </ul>
        </div>
      </div>
    </div>
  </section>

  <!-- 6. localStorage como Cache -->
  <section class="mb-5">
    <h3 class="section-title with-icon">
      <i class="fas fa-database"></i> 6. localStorage como Cache
    </h3>
    <div class="card mb-4">
      <div class="card-body">
        <h4>6.1 Estrat√©gia de Cache Offline</h4>
        <p>
          Vamos evoluir nosso sistema de localStorage existente para funcionar
          como cache offline quando a API n√£o estiver dispon√≠vel.
        </p>

        <pre><code class="language-jsx">// utils/cache.js
const CACHE_KEY = 'contacts_cache';
const CACHE_EXPIRY = 5 * 60 * 1000; // 5 minutos

export const cacheService = {
  // Salvar dados no cache
  set: (data) => {
    const cacheData = {
      data,
      timestamp: Date.now(),
    };
    localStorage.setItem(CACHE_KEY, JSON.stringify(cacheData));
  },

  // Recuperar dados do cache
  get: () => {
    try {
      const cached = localStorage.getItem(CACHE_KEY);
      if (!cached) return null;

      const { data, timestamp } = JSON.parse(cached);
      const isExpired = Date.now() - timestamp > CACHE_EXPIRY;
      
      return isExpired ? null : data;
    } catch {
      return null;
    }
  },

  // Limpar cache
  clear: () => {
    localStorage.removeItem(CACHE_KEY);
  },

  // Verificar se cache existe e √© v√°lido
  isValid: () => {
    const cached = localStorage.getItem(CACHE_KEY);
    if (!cached) return false;

    try {
      const { timestamp } = JSON.parse(cached);
      return Date.now() - timestamp <= CACHE_EXPIRY;
    } catch {
      return false;
    }
  }
};</code></pre>

        <h4>6.2 Integrando Cache Service no app/page.js</h4>
        <p>
          Agora vamos integrar o cache service criado no projeto principal,
          substituindo o localStorage direto por uma solu√ß√£o mais robusta e
          mantendo todas as otimiza√ß√µes existentes.
        </p>

        <div class="alert alert-info mt-3">
          <strong>Modifica√ß√µes Incrementais:</strong>
          <ul>
            <li>
              ‚úÖ <strong>MANTER:</strong> useMemo, useCallback, useRef e todas
              as otimiza√ß√µes
            </li>
            <li>
              ‚úÖ <strong>MANTER:</strong> Estados existentes (contacts, filter,
              loading, error, isOffline)
            </li>
            <li>
              ‚úÖ <strong>MANTER:</strong> Handlers memoizados e renderiza√ß√£o
              condicional
            </li>
            <li>
              üÜï <strong>ADICIONAR:</strong> Import do cacheService
              (utils/cache)
            </li>
            <li>
              üÜï <strong>MODIFICAR:</strong> useEffect para usar cache service
              com expira√ß√£o
            </li>
            <li>
              üÜï <strong>MODIFICAR:</strong> Handlers para atualizar cache
              automaticamente
            </li>
            <li>üÜï <strong>ADICIONAR:</strong> ConnectionStatus no header</li>
          </ul>
        </div>

        <h5>üìÅ Arquivo: app/page.js</h5>
        <p>
          <strong>Evolu√ß√£o completa:</strong> Manter TODAS as otimiza√ß√µes +
          Cache Service + ConnectionStatus
        </p>
        <pre><code class="language-jsx">// app/page.js - VERS√ÉO COMPLETA EVOLU√çDA COM CACHE SERVICE
"use client";
import { useCallback, useEffect, useMemo, useState } from "react";
import ContactForm from "./components/ContactForm";
import ContactList from "./components/ContactList";
import FilterInput from "./components/FilterInput";
import Statistcs from "./components/Statistcs";
import ConnectionStatus from "./components/ConnectionStatus"; // üÜï ADICIONAR: Componente de status
import api from './utils/api';
import { cacheService } from './utils/cache'; // üÜï ADICIONAR: Cache service

const HomePage = () => {
  // ‚úÖ MANTER: Estados existentes do projeto
  const [contacts, setContacts] = useState([]);
  const [filter, setFilter] = useState('');
  const [loading, setLoading] = useState(true);
  const [error, setError] = useState(null);
  const [isOffline, setIsOffline] = useState(false);

  // üÜï MODIFICAR: useEffect de carregamento com cache service + CLEANUP
  useEffect(() => {
    let isMounted = true; // Flag para verificar se componente ainda est√° montado

    const loadContacts = async () => {
      try {
        if (isMounted) {
          setLoading(true);
          setError(null);
        }
        
        // Verificar cache primeiro
        const cachedContacts = cacheService.get();
        if (cachedContacts && isMounted) {
          setContacts(cachedContacts);
          setLoading(false);
        }
        
        // Tentar carregar da API
        try {
          const response = await api.get('/contacts');
          const apiContacts = response.data;
          
          if (isMounted) {
            // Salvar no cache service
            cacheService.set(apiContacts);
            setContacts(apiContacts);
            setIsOffline(false);
          }
        } catch (apiError) {
          // Se API falhar e n√£o h√° cache, mostrar erro
          if (isMounted) {
            if (!cachedContacts) {
              setIsOffline(true);
              setError('Erro ao carregar contatos e sem cache dispon√≠vel.');
            } else {
              setIsOffline(true);
              console.log('API offline, usando cache');
            }
          }
        }
      } catch (err) {
        if (isMounted) {
          setError('Erro ao carregar contatos');
        }
      } finally {
        if (isMounted) {
          setLoading(false);
        }
      }
    };

    loadContacts();

    // CLEANUP: Executado quando componente √© desmontado
    return () => {
      isMounted = false;
      console.log('Componente desmontado - cancelando requisi√ß√µes');
    };
  }, []);

  // ‚úÖ MANTER: Lista filtrada otimizada (useMemo da aula anterior)
  const filteredContacts = useMemo(() => {
    if (!filter.trim()) {
      return contacts;
    }
    
    return contacts.filter(contact =>
      contact.nome.toLowerCase().includes(filter.toLowerCase()) ||
      contact.email.toLowerCase().includes(filter.toLowerCase()) ||
      contact.telefone.includes(filter)
    );
  }, [contacts, filter]);

  // ‚úÖ MANTER: Estat√≠sticas memoizadas (useMemo da aula anterior)
  const stats = useMemo(() => {
    const total = contacts.length;
    const comEmail = contacts.filter(c => c.email).length;
    const comTelefone = contacts.filter(c => c.telefone).length;
    
    return {
      total,
      comEmail,
      comTelefone,
      semEmail: total - comEmail,
      semTelefone: total - comTelefone
    };
  }, [contacts]);

  // ‚úÖ MANTER: Handlers memoizados do projeto existente
  const handleSubmit = useCallback((newContact) => {
    setContacts(prev => {
      const updated = [...prev, newContact];
      // Atualizar cache
      cacheService.set(updated);
      return updated;
    });
  }, []);

  // üÜï MODIFICAR: handleRemove com integra√ß√£o de API + fallback offline
  const handleRemove = useCallback(async (id) => {
    try {
      // Tentar excluir via API primeiro
      try {
        await api.delete(`/contacts/${id}`);
        console.log('Contato exclu√≠do da API');
      } catch (apiError) {
        // Se API falhar, apenas remover localmente
        console.log('API offline, removendo apenas localmente');
      }
      
      // Remover da lista local em ambos os casos
      setContacts(prev => {
        const updated = prev.filter(c => c.id !== id);
        // Atualizar cache
        cacheService.set(updated);
        return updated;
      });
    } catch (err) {
      console.error('Erro ao remover contato:', err);
    }
  }, []);

  const handleFilterChange = useCallback((value) => {
    setFilter(value);
  }, []);

  return (
    &lt;div className="min-h-screen bg-gray-200 p-6"&gt;
      &lt;div className="max-w-3xl mx-auto space-y-6"&gt;
        &lt;header className="flex items-center justify-between"&gt;
          &lt;h1 className="text-2xl font-bold text-gray-900"&gt;Cadastro de Contatos&lt;/h1&gt;
          &lt;div className="flex items-center space-x-4"&gt;
            &lt;FilterInput value={filter} onChange={handleFilterChange} /&gt;
            &lt;ConnectionStatus /&gt; {/* üÜï ADICIONAR: Componente de status */}
          &lt;/div&gt;
        &lt;/header&gt;

        &lt;ContactForm onAdd={handleSubmit} /&gt;

        {loading && (
          &lt;div className="text-center py-8"&gt;
            &lt;i className="fas fa-spinner fa-spin text-2xl text-blue-600"&gt;&lt;/i&gt;
            &lt;p className="mt-2"&gt;Carregando contatos...&lt;/p&gt;
          &lt;/div&gt;
        )}

        {error && (
          &lt;div className="text-center py-8"&gt;
            &lt;i className="fas fa-exclamation-circle text-2xl text-red-600"&gt;&lt;/i&gt;
            &lt;p className="mt-2 text-red-600"&gt;{error}&lt;/p&gt;
            &lt;button 
              onClick={() => window.location.reload()}
              className="mt-4 bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700"
            &gt;
              Tentar Novamente
            &lt;/button&gt;
          &lt;/div&gt;
        )}

        {!loading && !error && (
          &lt;ContactList items={filteredContacts} onRemove={handleRemove} /&gt;
        )}

        &lt;Statistcs stats={stats} /&gt;
      &lt;/div&gt;
    &lt;/div&gt;
  );
};

export default HomePage;</code></pre>
      </div>
    </div>
  </section>

  <!-- 7. P√°gina de Detalhes com API -->
  <section class="mb-5">
    <h3 class="section-title with-icon">
      <i class="fas fa-user-circle"></i> 7. P√°gina de Detalhes com API
    </h3>

    <div class="card mb-4">
      <div class="card-body">
        <h4>7.1 Atualizando P√°gina de Detalhes para Buscar da API</h4>
        <p>
          Vamos atualizar a p√°gina de detalhes do contato para buscar os dados
          diretamente da API, mantendo fallback para cache local quando offline.
        </p>

        <div class="alert alert-info">
          <strong>Evolu√ß√£o:</strong> A p√°gina de detalhes da aula anterior
          buscava dados do localStorage. Agora vamos buscar da API com fallback
          para cache.
        </div>

        <h5>üìÅ Arquivo: app/contact/[id]/page.js</h5>
        <p>
          <strong>Evolu√ß√£o completa:</strong> Buscar da API + fallback cache +
          estados de loading/erro
        </p>

        <pre><code class="language-jsx">// app/contact/[id]/page.js (MODIFICAR ARQUIVO EXISTENTE)
"use client";

import { useParams, useRouter } from 'next/navigation';
import { useEffect, useState } from "react";
import api from '../../utils/api'; // utils/api.js (existente)

const ContactDetailPage = () => {
    // ‚úÖ MANTER: Estados e hooks existentes
    const params = useParams();
    const router = useRouter();
    const [contact, setContact] = useState(null);
    const [loading, setLoading] = useState(true);
    // üÜï ADICIONAR: Estado de erro para tratamento de falhas
    const [error, setError] = useState(null);

    useEffect(() => {
        const fetchContact = async () => {
            try {
                setLoading(true);
                setError(null);
                
                // üÜï SUBSTITUIR: Buscar da API primeiro (antes era s√≥ localStorage)
                try {
                    const response = await api.get(`/contacts/${params.id}`);
                    setContact(response.data);
                } catch (apiError) {
                    // ‚úÖ MANTER: Fallback para localStorage (como na vers√£o anterior)
                    console.log('API offline, buscando do cache local');
                    const cachedContacts = localStorage.getItem('contatos');
                    if (cachedContacts) {
                        const contacts = JSON.parse(cachedContacts);
                        const foundContact = contacts.find(c => c.id === parseInt(params.id));
                        if (foundContact) {
                            setContact(foundContact);
                        } else {
                            setError('Contato n√£o encontrado');
                        }
                    } else {
                        setError('Contato n√£o encontrado e sem cache dispon√≠vel');
                    }
                }
            } catch (err) {
                console.error('Erro ao buscar contato:', err);
                setError('Erro ao carregar contato');
            } finally {
                setLoading(false);
            }
        };

        fetchContact();
    }, [params.id]);

    // üÜï MELHORAR: Loading state mais elaborado (antes era s√≥ texto simples)
    if (loading) {
        return (
            &lt;div className="min-h-screen bg-gray-50 p-6"&gt;
                &lt;div className="max-w-2xl mx-auto"&gt;
                    &lt;div className="bg-white shadow rounded-lg p-6"&gt;
                        &lt;div className="flex items-center justify-center"&gt;
                            &lt;i className="fas fa-spinner fa-spin text-2xl text-blue-600 mr-3"&gt;&lt;/i&gt;
                            &lt;p className="text-gray-600"&gt;Carregando contato...&lt;/p&gt;
                        &lt;/div&gt;
                    &lt;/div&gt;
                &lt;/div&gt;
            &lt;/div&gt;
        );
    }

    // üÜï ADICIONAR: Tratamento de erro elaborado (antes era s√≥ texto simples)
    if (error || !contact) {
        return (
            &lt;div className="min-h-screen bg-gray-50 p-6"&gt;
                &lt;div className="max-w-2xl mx-auto"&gt;
                    &lt;div className="bg-white shadow rounded-lg p-6"&gt;
                        &lt;div className="flex items-center justify-between mb-6"&gt;
                            &lt;h1 className="text-2xl font-bold text-gray-900"&gt;Erro&lt;/h1&gt;
                            &lt;button
                                onClick={() =&gt; router.back()}
                                className="bg-gray-100 hover:bg-gray-200 text-gray-900 px-4 py-2 rounded"
                            &gt;
                                &amp;larr; Voltar
                            &lt;/button&gt;
                        &lt;/div&gt;
                        &lt;div className="text-center"&gt;
                            &lt;i className="fas fa-exclamation-circle text-3xl text-red-600 mb-4"&gt;&lt;/i&gt;
                            &lt;p className="text-gray-600"&gt;{error || 'Contato n√£o encontrado'}&lt;/p&gt;
                            &lt;button
                                onClick={() =&gt; router.push('/')}
                                className="mt-4 bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700"
                            &gt;
                                Ir para Lista de Contatos
                            &lt;/button&gt;
                        &lt;/div&gt;
                    &lt;/div&gt;
                &lt;/div&gt;
            &lt;/div&gt;
        );
    }

    // üÜï MELHORAR: Layout da p√°gina de detalhes com funcionalidades extras
    return (
        &lt;div className="min-h-screen bg-gray-50 p-6"&gt;
            &lt;div className="max-w-2xl mx-auto"&gt;
                &lt;div className="bg-white shadow rounded-lg p-6"&gt;
                    &lt;div className="flex items-center justify-between mb-6"&gt;
                        &lt;h1 className="text-2xl font-bold text-gray-900"&gt;Detalhes do Contato&lt;/h1&gt;
                        &lt;button
                            onClick={() =&gt; router.back()}
                            className="bg-gray-100 hover:bg-gray-200 text-gray-900 px-4 py-2 rounded"
                        &gt;
                            &amp;larr; Voltar
                        &lt;/button&gt;
                    &lt;/div&gt;

                    &lt;div className="space-y-4"&gt;
                        &lt;div&gt;
                            &lt;label className="block text-sm font-medium text-gray-700 mb-1"&gt;Nome&lt;/label&gt;
                            &lt;p className="text-gray-900 text-lg"&gt;{contact.nome}&lt;/p&gt;
                        &lt;/div&gt;

                        &lt;div&gt;
                            &lt;label className="block text-sm font-medium text-gray-700 mb-1"&gt;Email&lt;/label&gt;
                            &lt;p className="text-gray-900"&gt;
                                {contact.email ? (
                                    &lt;a href={`mailto:${contact.email}`} className="text-blue-600 hover:underline"&gt;
                                        {contact.email}
                                    &lt;/a&gt;
                                ) : (
                                    &lt;span className="text-gray-500"&gt;N√£o informado&lt;/span&gt;
                                )}
                            &lt;/p&gt;
                        &lt;/div&gt;

                        &lt;div&gt;
                            &lt;label className="block text-sm font-medium text-gray-700 mb-1"&gt;Telefone&lt;/label&gt;
                            &lt;p className="text-gray-900"&gt;
                                {contact.telefone ? (
                                    &lt;a href={`tel:${contact.telefone}`} className="text-blue-600 hover:underline"&gt;
                                        {contact.telefone}
                                    &lt;/a&gt;
                                ) : (
                                    &lt;span className="text-gray-500"&gt;N√£o informado&lt;/span&gt;
                                )}
                            &lt;/p&gt;
                        &lt;/div&gt;

                        &lt;div&gt;
                            &lt;label className="block text-sm font-medium text-gray-700 mb-1"&gt;ID&lt;/label&gt;
                            &lt;p className="text-gray-500 text-sm"&gt;{contact.id}&lt;/p&gt;
                        &lt;/div&gt;
                    &lt;/div&gt;

                    &lt;div className="mt-8 pt-6 border-t border-gray-200"&gt;
                        &lt;div className="flex space-x-4"&gt;
                            &lt;button
                                onClick={() =&gt; router.push('/')}
                                className="flex-1 bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700"
                            &gt;
                                Ver Todos os Contatos
                            &lt;/button&gt;
                            &lt;button
                                onClick={() =&gt; router.back()}
                                className="flex-1 bg-gray-100 text-gray-900 px-4 py-2 rounded hover:bg-gray-200"
                            &gt;
                                Voltar
                            &lt;/button&gt;
                        &lt;/div&gt;
                    &lt;/div&gt;
                &lt;/div&gt;
            &lt;/div&gt;
        &lt;/div&gt;
    );
};

export default ContactDetailPage;</code></pre>

        <div class="alert alert-success">
          <strong>Vantagens da nova implementa√ß√£o:</strong>
          <ul>
            <li>
              ‚úÖ <strong>Busca da API:</strong> Dados sempre atualizados do
              servidor
            </li>
            <li>
              ‚úÖ <strong>Fallback offline:</strong> Usa cache local quando API
              n√£o est√° dispon√≠vel
            </li>
            <li>
              ‚úÖ <strong>Estados de UI:</strong> Loading, erro e sucesso bem
              definidos
            </li>
            <li>
              ‚úÖ <strong>Links funcionais:</strong> Email e telefone clic√°veis
            </li>
            <li>
              ‚úÖ <strong>Navega√ß√£o melhorada:</strong> Bot√µes para voltar e ir
              para lista
            </li>
            <li>
              ‚úÖ <strong>Tratamento de erros:</strong> Mensagens claras para
              diferentes cen√°rios
            </li>
          </ul>
        </div>
      </div>
    </div>
  </section>

  <!-- 8. Sincroniza√ß√£o Online/Offline -->
  <section class="mb-5">
    <h3 class="section-title with-icon">
      <i class="fas fa-wifi"></i> 8. Sincroniza√ß√£o Online/Offline
    </h3>
    <div class="card mb-4">
      <div class="card-body">
        <h4>8.1 Detec√ß√£o de Status de Conex√£o e Sincroniza√ß√£o</h4>
        <p>
          Vamos evoluir o componente principal para detectar mudan√ßas no status
          de conex√£o e sincronizar automaticamente os dados quando voltar
          online, mantendo todas as funcionalidades existentes.
        </p>

        <div class="alert alert-info mt-3">
          <strong>Modifica√ß√µes Incrementais:</strong>
          <ul>
            <li>
              ‚úÖ <strong>MANTER:</strong> Todos os estados e handlers existentes
            </li>
            <li>
              ‚úÖ <strong>MANTER:</strong> Cache service e carregamento de dados
            </li>
            <li>
              ‚úÖ <strong>MANTER:</strong> useMemo, useCallback e renderiza√ß√£o
            </li>
            <li>
              üÜï <strong>ADICIONAR:</strong> useEffect para detectar
              online/offline
            </li>
            <li>
              üÜï <strong>ADICIONAR:</strong> Fun√ß√£o de sincroniza√ß√£o autom√°tica
            </li>
            <li>
              üÜï <strong>ADICIONAR:</strong> Event listeners para
              navigator.onLine
            </li>
          </ul>
        </div>

        <h5>üìÅ Arquivo: app/page.js</h5>
        <p>
          <strong>Evolu√ß√£o parcial:</strong> Adicionar apenas useEffect de
          sincroniza√ß√£o (manter todo o resto)
        </p>

        <pre><code class="language-jsx">// app/page.js - Adicionar detec√ß√£o de conex√£o
"use client";
import { useCallback, useEffect, useMemo, useState } from "react";
// ... outros imports

const HomePage = () => {
  // ‚úÖ MANTER: Estados existentes do projeto
  const [contacts, setContacts] = useState([]);
  const [filter, setFilter] = useState('');
  const [loading, setLoading] = useState(true);
  const [error, setError] = useState(null);
  const [isOffline, setIsOffline] = useState(false);

  // üÜï ADICIONAR: useEffect para detectar mudan√ßas de conex√£o e sincronizar
  useEffect(() => {
    const syncPendingContacts = async () => {
      try {
        // Buscar contatos da API
        const response = await api.get('/contacts');
        const serverContacts = response.data;
        
        // Buscar contatos locais
        const localContacts = contacts;
        
        // Encontrar contatos que existem localmente mas n√£o no servidor
        const pendingContacts = localContacts.filter(localContact => {
          // Se o ID √© um timestamp (salvo offline), precisa sincronizar
          return typeof localContact.id === 'number' && 
                 localContact.id > 1000000000000 && // Timestamp v√°lido
                 !serverContacts.some(serverContact => 
                   serverContact.nome === localContact.nome &&
                   serverContact.email === localContact.email &&
                   serverContact.telefone === localContact.telefone
                 );
        });

        // Enviar contatos pendentes para a API
        for (const pendingContact of pendingContacts) {
          try {
            const { id, ...contactData } = pendingContact;
            const response = await api.post('/contacts', contactData);
            
            // Atualizar o contato local com o ID da API
            setContacts(prev => prev.map(contact => 
              contact.id === pendingContact.id 
                ? { ...contact, id: response.data.id }
                : contact
            ));
            
            console.log('Contato sincronizado:', contactData.nome);
          } catch (err) {
            console.error('Erro ao sincronizar contato:', err);
          }
        }

        // Atualizar com dados do servidor
        setContacts(serverContacts);
        localStorage.setItem('contatos', JSON.stringify(serverContacts));
        
      } catch (err) {
        console.error('Erro na sincroniza√ß√£o:', err);
      }
    };

    const handleOnline = () => {
      setIsOffline(false);
      console.log('Voltou online - sincronizando...');
      syncPendingContacts();
    };

    const handleOffline = () => {
      setIsOffline(true);
      console.log('Ficou offline - usando cache local');
    };

    // Verificar status inicial
    setIsOffline(!navigator.onLine);

    // Adicionar listeners
    window.addEventListener('online', handleOnline);
    window.addEventListener('offline', handleOffline);

    return () => {
      window.removeEventListener('online', handleOnline);
      window.removeEventListener('offline', handleOffline);
    };
  }, [contacts]);

  // ... resto do c√≥digo
};</code></pre>

        <h4>7.2 Sincroniza√ß√£o Inteligente</h4>
        <p>
          A sincroniza√ß√£o agora √© mais inteligente: quando a internet volta, o
          sistema:
        </p>
        <ul>
          <li>
            ‚úÖ <strong>Identifica contatos pendentes:</strong> Contatos salvos
            offline (com ID timestamp)
          </li>
          <li>
            ‚úÖ <strong>Envia para API:</strong> Sincroniza contatos que n√£o
            existem no servidor
          </li>
          <li>
            ‚úÖ <strong>Atualiza IDs:</strong> Substitui IDs tempor√°rios pelos
            IDs reais da API
          </li>
          <li>
            ‚úÖ <strong>Evita duplicatas:</strong> Compara por nome, email e
            telefone
          </li>
          <li>
            ‚úÖ <strong>Mant√©m dados:</strong> Nenhum contato se perde na
            sincroniza√ß√£o
          </li>
        </ul>

        <h4>7.3 Componente ConnectionStatus</h4>
        <p>
          Vamos criar um componente separado para gerenciar o status de conex√£o,
          mantendo a organiza√ß√£o do projeto.
        </p>

        <pre><code class="language-jsx">// components/ConnectionStatus.jsx - NOVO COMPONENTE
import { useEffect, useState } from 'react';

const ConnectionStatus = () => {
  const [isOnline, setIsOnline] = useState(navigator.onLine);
  const [showStatus, setShowStatus] = useState(false);

  useEffect(() => {
    const handleOnline = () => {
      setIsOnline(true);
      setShowStatus(true);
      // Esconder status ap√≥s 3 segundos
      setTimeout(() => setShowStatus(false), 3000);
    };

    const handleOffline = () => {
      setIsOnline(false);
      setShowStatus(true);
    };

    // Verificar status inicial
    setIsOnline(navigator.onLine);

    // Adicionar listeners
    window.addEventListener('online', handleOnline);
    window.addEventListener('offline', handleOffline);

    return () => {
      window.removeEventListener('online', handleOnline);
      window.removeEventListener('offline', handleOffline);
    };
  }, []);

  return (
    &lt;div className={`flex items-center space-x-2 px-3 py-1 rounded-full text-sm transition-all duration-300 ${
      isOnline 
        ? 'bg-green-100 text-green-800' 
        : 'bg-orange-100 text-orange-800'
    }`}&gt;
      &lt;div className={`w-2 h-2 rounded-full ${
        isOnline ? 'bg-green-500' : 'bg-orange-500'
      }`}&gt;&lt;/div&gt;
      &lt;span&gt;
        {isOnline ? 'Online' : 'Offline'}
      &lt;/span&gt;
      {isOnline && showStatus && (
        &lt;span className="text-xs"&gt;‚úì Sincronizado&lt;/span&gt;
      )}
    &lt;/div&gt;
  );
};

export default ConnectionStatus;</code></pre>

        <h4>7.4 Usando o ConnectionStatus no Header</h4>
        <pre><code class="language-jsx">// No return do HomePage - EVOLU√á√ÉO do projeto existente
return (
  &lt;div className="min-h-screen bg-gray-200 p-6"&gt;
    &lt;div className="max-w-3xl mx-auto space-y-6"&gt;
      &lt;header className="flex items-center justify-between"&gt;
        &lt;h1 className="text-2xl font-bold text-gray-900"&gt;Cadastro de Contatos&lt;/h1&gt;
        &lt;div className="flex items-center space-x-4"&gt;
          &lt;FilterInput value={filter} onChange={handleFilterChange} /&gt;
          &lt;ConnectionStatus /&gt;
        &lt;/div&gt;
      &lt;/header&gt;
      // ... resto do JSX
    &lt;/div&gt;
  &lt;/div&gt;
);</code></pre>
      </div>
    </div>
  </section>

  <!-- 8. Testes R√°pidos (Quiz) -->
  <section class="mb-5">
    <h3 class="section-title with-icon">
      <i class="fas fa-clipboard-check"></i> 8. Testes R√°pidos (Quiz)
    </h3>
    <div class="card mb-4">
      <div class="card-body">
        <ol>
          <li class="mb-3">
            Qual √© a principal vantagem do axios sobre o fetch nativo?
            <div>
              a) √â mais r√°pido &nbsp; b) Tem interceptors e melhor tratamento de
              erro &nbsp; c) √â mais leve &nbsp; d) N√£o precisa de configura√ß√£o
            </div>
          </li>
          <li class="mb-3">
            Quando o useEffect com array vazio [] executa?
            <div>
              a) Em toda renderiza√ß√£o &nbsp; b) Apenas no mount e unmount &nbsp;
              c) Quando o estado muda &nbsp; d) Nunca
            </div>
          </li>
          <li class="mb-3">
            Para que serve o cleanup no useEffect?
            <div>
              a) Limpar o estado &nbsp; b) Evitar memory leaks &nbsp; c)
              Cancelar requisi√ß√µes &nbsp; d) Todas as anteriores
            </div>
          </li>
          <li class="mb-3">
            Qual √© a melhor estrat√©gia para cache offline?
            <div>
              a) Salvar tudo no localStorage &nbsp; b) Usar apenas API &nbsp; c)
              Cache com expira√ß√£o e fallback &nbsp; d) N√£o usar cache
            </div>
          </li>
          <li class="mb-3">
            Como detectar quando o usu√°rio volta online?
            <div>
              a) Usar navigator.onLine &nbsp; b) Fazer ping no servidor &nbsp;
              c) Usar WebSocket &nbsp; d) Todas as anteriores
            </div>
          </li>
        </ol>

        <details class="solucao">
          <summary>Mostrar gabarito</summary>
          <ol>
            <li>b) Tem interceptors e melhor tratamento de erro</li>
            <li>b) Apenas no mount e unmount</li>
            <li>d) Todas as anteriores</li>
            <li>c) Cache com expira√ß√£o e fallback</li>
            <li>d) Todas as anteriores</li>
          </ol>
        </details>
      </div>
    </div>
  </section>

  <!-- 9. Exerc√≠cios Pr√°ticos -->
  <section class="mb-5">
    <h3 class="section-title with-icon">
      <i class="fas fa-chalkboard-teacher"></i> 9. Exerc√≠cios Pr√°ticos
    </h3>

    <div class="desafio">
      <h4>Exerc√≠cio 1: Evoluir Projeto de Contatos</h4>
      <p>
        <strong>Objetivo:</strong> Evoluir o projeto de contatos da aula
        anterior para integrar com API mantendo todas as otimiza√ß√µes existentes.
      </p>
      <ol>
        <li>Manter todas as otimiza√ß√µes (useMemo, useCallback, useRef)</li>
        <li>Integrar com MockAPI.io para persist√™ncia real</li>
        <li>Implementar estados de loading e erro</li>
        <li>Evoluir cache localStorage para funcionar offline</li>
        <li>Adicionar sincroniza√ß√£o autom√°tica</li>
        <li>Manter componente Statistics separado</li>
      </ol>
      <details class="solucao">
        <summary>Mostrar solu√ß√£o</summary>
        <pre><code class="language-jsx">// 1. Configurar axios (utils/api.js)
import axios from 'axios';

const api = axios.create({
  baseURL: 'https://68d96d1b90a75154f0da61ae.mockapi.io',
  timeout: 10000,
});

export default api;

// 2. Evoluir HomePage (app/page.js)
"use client";
import { useCallback, useEffect, useMemo, useState } from "react";
import ContactForm from "./components/ContactForm";
import ContactList from "./components/ContactList";
import FilterInput from "./components/FilterInput";
import Statistcs from "./components/Statistcs";
import api from './utils/api';

const HomePage = () => {
  const [contacts, setContacts] = useState([]);
  const [filter, setFilter] = useState('');
  const [loading, setLoading] = useState(true);
  const [error, setError] = useState(null);
  const [isOffline, setIsOffline] = useState(false);

  // Carregar contatos da API + localStorage
  useEffect(() => {
    const loadContacts = async () => {
      try {
        setLoading(true);
        setError(null);
        
        try {
          const response = await api.get('/contacts');
          setContacts(response.data);
          localStorage.setItem('contatos', JSON.stringify(response.data));
          setIsOffline(false);
        } catch (apiError) {
          console.log('API offline, carregando do cache');
          setIsOffline(true);
          const cached = localStorage.getItem('contatos');
          if (cached) {
            setContacts(JSON.parse(cached));
          } else {
            setError('Erro ao carregar contatos e sem cache dispon√≠vel.');
          }
        }
      } catch (err) {
        setError('Erro ao carregar contatos');
      } finally {
        setLoading(false);
      }
    };

    loadContacts();
  }, []);

  // Detectar status de conex√£o
  useEffect(() => {
    const syncPendingContacts = async () => {
      try {
        // Buscar contatos da API
        const response = await api.get('/contacts');
        const serverContacts = response.data;
        
        // Buscar contatos locais
        const localContacts = contacts;
        
        // Encontrar contatos que existem localmente mas n√£o no servidor
        const pendingContacts = localContacts.filter(localContact => {
          // Se o ID √© um timestamp (salvo offline), precisa sincronizar
          return typeof localContact.id === 'number' && 
                 localContact.id > 1000000000000 && // Timestamp v√°lido
                 !serverContacts.some(serverContact => 
                   serverContact.nome === localContact.nome &&
                   serverContact.email === localContact.email &&
                   serverContact.telefone === localContact.telefone
                 );
        });

        // Enviar contatos pendentes para a API
        for (const pendingContact of pendingContacts) {
          try {
            const { id, ...contactData } = pendingContact;
            const response = await api.post('/contacts', contactData);
            
            // Atualizar o contato local com o ID da API
            setContacts(prev => prev.map(contact => 
              contact.id === pendingContact.id 
                ? { ...contact, id: response.data.id }
                : contact
            ));
            
            console.log('Contato sincronizado:', contactData.nome);
          } catch (err) {
            console.error('Erro ao sincronizar contato:', err);
          }
        }

        // Atualizar com dados do servidor
        setContacts(serverContacts);
        localStorage.setItem('contatos', JSON.stringify(serverContacts));
        
      } catch (err) {
        console.error('Erro na sincroniza√ß√£o:', err);
      }
    };

    const handleOnline = () => {
      setIsOffline(false);
      console.log('Voltou online - sincronizando...');
      syncPendingContacts();
    };

    const handleOffline = () => {
      setIsOffline(true);
      console.log('Ficou offline - usando cache local');
    };

    setIsOffline(!navigator.onLine);
    window.addEventListener('online', handleOnline);
    window.addEventListener('offline', handleOffline);

    return () => {
      window.removeEventListener('online', handleOnline);
      window.removeEventListener('offline', handleOffline);
    };
  }, [contacts]);

  // ‚úÖ MANTER: localStorage do projeto existente
  useEffect(() => {
    if (contacts.length > 0) {
      localStorage.setItem('contatos', JSON.stringify(contacts));
    }
  }, [contacts]);

  // ‚úÖ MANTER: Lista filtrada otimizada (useMemo)
  const filteredContacts = useMemo(() => {
    if (!filter.trim()) {
      return contacts;
    }
    
    return contacts.filter(contact =>
      contact.nome.toLowerCase().includes(filter.toLowerCase()) ||
      contact.email.toLowerCase().includes(filter.toLowerCase()) ||
      contact.telefone.includes(filter)
    );
  }, [contacts, filter]);

  // ‚úÖ MANTER: Estat√≠sticas memoizadas (useMemo)
  const stats = useMemo(() => {
    const total = contacts.length;
    const comEmail = contacts.filter(c => c.email).length;
    const comTelefone = contacts.filter(c => c.telefone).length;
    
    return {
      total,
      comEmail,
      comTelefone,
      semEmail: total - comEmail,
      semTelefone: total - comTelefone
    };
  }, [contacts]);

  // ‚úÖ MANTER: Handlers memoizados (useCallback)
  const handleSubmit = useCallback((newContact) => {
    setContacts(prev => [...prev, newContact]);
  }, []);

  // üÜï MODIFICAR: handleRemove com integra√ß√£o de API + fallback offline
  const handleRemove = useCallback(async (id) => {
    try {
      // Tentar excluir via API primeiro
      try {
        await api.delete(`/contacts/${id}`);
        console.log('Contato exclu√≠do da API');
      } catch (apiError) {
        // Se API falhar, apenas remover localmente
        console.log('API offline, removendo apenas localmente');
      }
      
      // Remover da lista local em ambos os casos
      setContacts(prev => prev.filter(c => c.id !== id));
    } catch (err) {
      console.error('Erro ao remover contato:', err);
    }
  }, []);

  const handleFilterChange = useCallback((value) => {
    setFilter(value);
  }, []);

  return (
    &lt;div className="min-h-screen bg-gray-200 p-6"&gt;
      &lt;div className="max-w-3xl mx-auto space-y-6"&gt;
        &lt;header className="flex items-center justify-between"&gt;
          &lt;h1 className="text-2xl font-bold text-gray-900"&gt;Cadastro de Contatos&lt;/h1&gt;
          &lt;div className="flex items-center space-x-4"&gt;
            &lt;FilterInput value={filter} onChange={handleFilterChange} /&gt;
            {isOffline && (
              &lt;span className="text-orange-600 text-sm"&gt;
                &lt;i className="fas fa-exclamation-triangle"&gt;&lt;/i&gt; Offline
              &lt;/span&gt;
            )}
          &lt;/div&gt;
        &lt;/header&gt;

        &lt;ContactForm onAdd={handleSubmit} /&gt;

        {loading && (
          &lt;div className="text-center py-8"&gt;
            &lt;i className="fas fa-spinner fa-spin text-2xl text-blue-600"&gt;&lt;/i&gt;
            &lt;p className="mt-2"&gt;Carregando contatos...&lt;/p&gt;
          &lt;/div&gt;
        )}

        {error && (
          &lt;div className="text-center py-8"&gt;
            &lt;i className="fas fa-exclamation-circle text-2xl text-red-600"&gt;&lt;/i&gt;
            &lt;p className="mt-2 text-red-600"&gt;{error}&lt;/p&gt;
            &lt;button 
              onClick={() => window.location.reload()}
              className="mt-4 bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700"
            &gt;
              Tentar Novamente
            &lt;/button&gt;
          &lt;/div&gt;
        )}

        {!loading && !error && (
          &lt;ContactList items={filteredContacts} onRemove={handleRemove} /&gt;
        )}

        &lt;Statistcs stats={stats} /&gt;
      &lt;/div&gt;
    &lt;/div&gt;
  );
};

export default HomePage;</code></pre>
      </details>
    </div>

    <div class="desafio">
      <h4>Exerc√≠cio 2: Melhorar Performance com API</h4>
      <p>
        <strong>Objetivo:</strong> Otimizar o projeto de contatos para melhor
        performance com API, mantendo todas as otimiza√ß√µes existentes.
      </p>
      <ol>
        <li>Criar endpoint /notifications no MockAPI.io</li>
        <li>Implementar cache local para notifica√ß√µes n√£o lidas</li>
        <li>Adicionar badge de contador de notifica√ß√µes</li>
        <li>Implementar sincroniza√ß√£o quando voltar online</li>
        <li>Adicionar anima√ß√µes para novas notifica√ß√µes</li>
      </ol>
      <details class="solucao">
        <summary>Mostrar solu√ß√£o</summary>
        <pre><code class="language-jsx">// 1. Componente de Notifica√ß√µes (components/Notifications.js)
import { useEffect, useState } from 'react';
import api from '../utils/api';

const Notifications = () => {
  const [notifications, setNotifications] = useState([]);
  const [unreadCount, setUnreadCount] = useState(0);
  const [loading, setLoading] = useState(false);

  useEffect(() => {
    const loadNotifications = async () => {
      try {
        setLoading(true);
        const response = await api.get('/notifications');
        setNotifications(response.data);
        
        // Contar n√£o lidas
        const unread = response.data.filter(n => !n.read).length;
        setUnreadCount(unread);
        
        // Salvar no cache
        localStorage.setItem('notifications', JSON.stringify(response.data));
      } catch (err) {
        // Fallback para cache
        const cached = localStorage.getItem('notifications');
        if (cached) {
          const data = JSON.parse(cached);
          setNotifications(data);
          setUnreadCount(data.filter(n => !n.read).length);
        }
      } finally {
        setLoading(false);
      }
    };

    loadNotifications();
  }, []);

  const markAsRead = async (id) => {
    try {
      await api.put(`/notifications/${id}`, { read: true });
      setNotifications(prev => 
        prev.map(n => n.id === id ? { ...n, read: true } : n)
      );
      setUnreadCount(prev => Math.max(0, prev - 1));
    } catch (err) {
      // Fallback local
      setNotifications(prev => 
        prev.map(n => n.id === id ? { ...n, read: true } : n)
      );
      setUnreadCount(prev => Math.max(0, prev - 1));
    }
  };

  return (
    &lt;div className="relative"&gt;
      &lt;button className="relative p-2 text-gray-600 hover:text-gray-900"&gt;
        &lt;i className="fas fa-bell text-xl"&gt;&lt;/i&gt;
        {unreadCount > 0 && (
          &lt;span className="absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full h-5 w-5 flex items-center justify-center animate-pulse"&gt;
            {unreadCount}
          &lt;/span&gt;
        )}
      &lt;/button&gt;
      
      {/* Dropdown de notifica√ß√µes */}
      &lt;div className="absolute right-0 mt-2 w-80 bg-white rounded-lg shadow-lg z-50"&gt;
        {notifications.map(notification => (
          &lt;div 
            key={notification.id}
            className={`p-3 border-b hover:bg-gray-50 cursor-pointer ${
              !notification.read ? 'bg-blue-50' : ''
            }`}
            onClick={() => markAsRead(notification.id)}
          &gt;
            &lt;p className="text-sm"&gt;{notification.message}&lt;/p&gt;
            &lt;p className="text-xs text-gray-500"&gt;{notification.time}&lt;/p&gt;
          &lt;/div&gt;
        ))}
      &lt;/div&gt;
    &lt;/div&gt;
  );
};

export default Notifications;</code></pre>
      </details>
    </div>

    <div class="desafio">
      <h4>Exerc√≠cio 3: Chat Offline</h4>
      <p>
        <strong>Objetivo:</strong> Criar um chat que funciona offline e
        sincroniza mensagens.
      </p>
      <ol>
        <li>Criar endpoint /messages no MockAPI.io</li>
        <li>Criar fila de mensagens offline</li>
        <li>Implementar envio em lote quando online</li>
        <li>Adicionar indicadores de status de envio</li>
        <li>Implementar rolagem autom√°tica para novas mensagens</li>
      </ol>
      <details class="solucao">
        <summary>Mostrar solu√ß√£o</summary>
        <pre><code class="language-jsx">// 1. Componente de Chat (components/Chat.js)
import { useEffect, useState, useRef } from 'react';
import api from '../utils/api';

const Chat = () => {
  const [messages, setMessages] = useState([]);
  const [newMessage, setNewMessage] = useState('');
  const [isOnline, setIsOnline] = useState(navigator.onLine);
  const [pendingMessages, setPendingMessages] = useState([]);
  const messagesEndRef = useRef(null);

  // Detectar status de conex√£o
  useEffect(() => {
    const handleOnline = () => {
      setIsOnline(true);
      syncPendingMessages();
    };

    const handleOffline = () => {
      setIsOnline(false);
    };

    window.addEventListener('online', handleOnline);
    window.addEventListener('offline', handleOffline);

    return () => {
      window.removeEventListener('online', handleOnline);
      window.removeEventListener('offline', handleOffline);
    };
  }, []);

  // Carregar mensagens
  useEffect(() => {
    const loadMessages = async () => {
      try {
        const response = await api.get('/messages');
        setMessages(response.data);
        localStorage.setItem('chat_messages', JSON.stringify(response.data));
      } catch (err) {
        const cached = localStorage.getItem('chat_messages');
        if (cached) {
          setMessages(JSON.parse(cached));
        }
      }
    };

    loadMessages();
  }, []);

  // Sincronizar mensagens pendentes
  const syncPendingMessages = async () => {
    if (pendingMessages.length === 0) return;

    for (const message of pendingMessages) {
      try {
        await api.post('/messages', message);
        setMessages(prev => [...prev, { ...message, status: 'sent' }]);
      } catch (err) {
        console.error('Erro ao sincronizar mensagem:', err);
      }
    }

    setPendingMessages([]);
  };

  // Enviar mensagem
  const sendMessage = async () => {
    if (!newMessage.trim()) return;

    const message = {
      id: Date.now(),
      text: newMessage,
      timestamp: new Date().toISOString(),
      status: isOnline ? 'sending' : 'pending'
    };

    if (isOnline) {
      try {
        const response = await api.post('/messages', message);
        setMessages(prev => [...prev, { ...response.data, status: 'sent' }]);
      } catch (err) {
        // Se falhar, adicionar √† fila
        setPendingMessages(prev => [...prev, message]);
        setMessages(prev => [...prev, { ...message, status: 'pending' }]);
      }
    } else {
      // Offline - adicionar √† fila
      setPendingMessages(prev => [...prev, message]);
      setMessages(prev => [...prev, { ...message, status: 'pending' }]);
    }

    setNewMessage('');
  };

  // Rolagem autom√°tica
  useEffect(() => {
    messagesEndRef.current?.scrollIntoView({ behavior: 'smooth' });
  }, [messages]);

  const getStatusIcon = (status) => {
    switch (status) {
      case 'sending': return '‚è≥';
      case 'pending': return 'üì§';
      case 'sent': return '‚úÖ';
      default: return '';
    }
  };

  return (
    &lt;div className="flex flex-col h-96 bg-white rounded-lg shadow"&gt;
      &lt;div className="p-3 border-b bg-gray-50"&gt;
        &lt;h3 className="font-semibold"&gt;Chat&lt;/h3&gt;
        &lt;div className="flex items-center space-x-2"&gt;
          &lt;div className={`w-2 h-2 rounded-full ${isOnline ? 'bg-green-500' : 'bg-red-500'}`}&gt;&lt;/div&gt;
          &lt;span className="text-sm text-gray-600"&gt;
            {isOnline ? 'Online' : 'Offline'}
          &lt;/span&gt;
          {pendingMessages.length > 0 && (
            &lt;span className="text-xs bg-orange-100 text-orange-800 px-2 py-1 rounded"&gt;
              {pendingMessages.length} pendente(s)
            &lt;/span&gt;
          )}
        &lt;/div&gt;
      &lt;/div&gt;

      &lt;div className="flex-1 overflow-y-auto p-3 space-y-2"&gt;
        {messages.map(message => (
          &lt;div key={message.id} className="flex justify-end"&gt;
            &lt;div className="bg-blue-500 text-white p-2 rounded-lg max-w-xs"&gt;
              &lt;p className="text-sm"&gt;{message.text}&lt;/p&gt;
              &lt;div className="flex items-center justify-between mt-1"&gt;
                &lt;span className="text-xs opacity-75"&gt;
                  {new Date(message.timestamp).toLocaleTimeString()}
                &lt;/span&gt;
                &lt;span className="text-xs ml-2"&gt;
                  {getStatusIcon(message.status)}
                &lt;/span&gt;
              &lt;/div&gt;
            &lt;/div&gt;
          &lt;/div&gt;
        ))}
        &lt;div ref={messagesEndRef} /&gt;
      &lt;/div&gt;

      &lt;div className="p-3 border-t"&gt;
        &lt;div className="flex space-x-2"&gt;
          &lt;input
            type="text"
            value={newMessage}
            onChange={(e) => setNewMessage(e.target.value)}
            onKeyPress={(e) => e.key === 'Enter' && sendMessage()}
            placeholder="Digite sua mensagem..."
            className="flex-1 border rounded px-3 py-2"
          /&gt;
          &lt;button
            onClick={sendMessage}
            disabled={!newMessage.trim()}
            className="bg-blue-500 text-white px-4 py-2 rounded disabled:opacity-50"
          &gt;
            Enviar
          &lt;/button&gt;
        &lt;/div&gt;
      &lt;/div&gt;
    &lt;/div&gt;
  );
};

export default Chat;</code></pre>
      </details>
    </div>

    <div class="desafio">
      <h4>Exerc√≠cio 4: Dashboard com M√©tricas</h4>
      <p>
        <strong>Objetivo:</strong> Criar dashboard que consome m√∫ltiplas APIs
        com cache inteligente.
      </p>
      <ol>
        <li>Integrar com APIs externas (ex: JSONPlaceholder, MockAPI)</li>
        <li>Implementar cache por endpoint com TTL diferente</li>
        <li>Adicionar refresh manual e autom√°tico</li>
        <li>Implementar fallback para dados em cache</li>
        <li>Adicionar gr√°ficos com dados da API</li>
      </ol>
      <details class="solucao">
        <summary>Mostrar solu√ß√£o</summary>
        <pre><code class="language-jsx">// 1. Servi√ßo de Cache Inteligente (utils/cacheService.js)
class CacheService {
  constructor() {
    this.cache = new Map();
    this.ttl = new Map();
  }

  set(key, data, ttlMinutes = 5) {
    const expiry = Date.now() + (ttlMinutes * 60 * 1000);
    this.cache.set(key, data);
    this.ttl.set(key, expiry);
    
    // Salvar no localStorage tamb√©m
    localStorage.setItem(`cache_${key}`, JSON.stringify({
      data,
      expiry
    }));
  }

  get(key) {
    const now = Date.now();
    const expiry = this.ttl.get(key);
    
    if (expiry && now > expiry) {
      this.cache.delete(key);
      this.ttl.delete(key);
      localStorage.removeItem(`cache_${key}`);
      return null;
    }

    if (this.cache.has(key)) {
      return this.cache.get(key);
    }

    // Tentar carregar do localStorage
    const stored = localStorage.getItem(`cache_${key}`);
    if (stored) {
      const { data, expiry } = JSON.parse(stored);
      if (now < expiry) {
        this.cache.set(key, data);
        this.ttl.set(key, expiry);
        return data;
      } else {
        localStorage.removeItem(`cache_${key}`);
      }
    }

    return null;
  }

  clear() {
    this.cache.clear();
    this.ttl.clear();
    Object.keys(localStorage).forEach(key => {
      if (key.startsWith('cache_')) {
        localStorage.removeItem(key);
      }
    });
  }
}

export const cacheService = new CacheService();

// 2. Dashboard Component (components/Dashboard.js)
import { useEffect, useState } from 'react';
import axios from 'axios';
import { cacheService } from '../utils/cacheService';

const Dashboard = () => {
  const [users, setUsers] = useState([]);
  const [posts, setPosts] = useState([]);
  const [todos, setTodos] = useState([]);
  const [loading, setLoading] = useState({ users: false, posts: false, todos: false });
  const [lastUpdate, setLastUpdate] = useState({});

  // Carregar dados com cache
  const loadData = async (endpoint, setter, loadingKey, ttlMinutes = 5) => {
    const cacheKey = `dashboard_${endpoint}`;
    
    // Verificar cache primeiro
    const cached = cacheService.get(cacheKey);
    if (cached) {
      setter(cached);
      setLastUpdate(prev => ({ ...prev, [endpoint]: 'Cache' }));
      return;
    }

    try {
      setLoading(prev => ({ ...prev, [loadingKey]: true }));
      
      const response = await axios.get(`https://jsonplaceholder.typicode.com/${endpoint}`);
      const data = response.data;
      
      setter(data);
      cacheService.set(cacheKey, data, ttlMinutes);
      setLastUpdate(prev => ({ ...prev, [endpoint]: new Date().toLocaleTimeString() }));
      
    } catch (err) {
      console.error(`Erro ao carregar ${endpoint}:`, err);
    } finally {
      setLoading(prev => ({ ...prev, [loadingKey]: false }));
    }
  };

  // Carregar todos os dados
  const loadAllData = () => {
    loadData('users', setUsers, 'users', 10); // Cache por 10 minutos
    loadData('posts', setPosts, 'posts', 5);  // Cache por 5 minutos
    loadData('todos', setTodos, 'todos', 2);  // Cache por 2 minutos
  };

  useEffect(() => {
    loadAllData();
    
    // Refresh autom√°tico a cada 5 minutos
    const interval = setInterval(loadAllData, 5 * 60 * 1000);
    
    return () => clearInterval(interval);
  }, []);

  const refreshData = (endpoint) => {
    switch (endpoint) {
      case 'users':
        loadData('users', setUsers, 'users', 10);
        break;
      case 'posts':
        loadData('posts', setPosts, 'posts', 5);
        break;
      case 'todos':
        loadData('todos', setTodos, 'todos', 2);
        break;
      default:
        loadAllData();
    }
  };

  const clearCache = () => {
    cacheService.clear();
    loadAllData();
  };

  return (
    &lt;div className="p-6 space-y-6"&gt;
      &lt;div className="flex justify-between items-center"&gt;
        &lt;h1 className="text-2xl font-bold"&gt;Dashboard de M√©tricas&lt;/h1&gt;
        &lt;div className="space-x-2"&gt;
          &lt;button
            onClick={() => refreshData('all')}
            className="bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600"
          &gt;
            Refresh All
          &lt;/button&gt;
          &lt;button
            onClick={clearCache}
            className="bg-red-500 text-white px-4 py-2 rounded hover:bg-red-600"
          &gt;
            Limpar Cache
          &lt;/button&gt;
        &lt;/div&gt;
      &lt;/div&gt;

      &lt;div className="grid grid-cols-1 md:grid-cols-3 gap-6"&gt;
        {/* Card de Usu√°rios */}
        &lt;div className="bg-white p-6 rounded-lg shadow"&gt;
          &lt;div className="flex justify-between items-center mb-4"&gt;
            &lt;h3 className="text-lg font-semibold"&gt;Usu√°rios&lt;/h3&gt;
            &lt;button
              onClick={() => refreshData('users')}
              disabled={loading.users}
              className="text-blue-500 hover:text-blue-700 disabled:opacity-50"
            &gt;
              {loading.users ? '‚è≥' : 'üîÑ'}
            &lt;/button&gt;
          &lt;/div&gt;
          &lt;div className="text-3xl font-bold text-blue-600"&gt;{users.length}&lt;/div&gt;
          &lt;div className="text-sm text-gray-500"&gt;
            √öltima atualiza√ß√£o: {lastUpdate.users || 'Nunca'}
          &lt;/div&gt;
        &lt;/div&gt;

        {/* Card de Posts */}
        &lt;div className="bg-white p-6 rounded-lg shadow"&gt;
          &lt;div className="flex justify-between items-center mb-4"&gt;
            &lt;h3 className="text-lg font-semibold"&gt;Posts&lt;/h3&gt;
            &lt;button
              onClick={() => refreshData('posts')}
              disabled={loading.posts}
              className="text-blue-500 hover:text-blue-700 disabled:opacity-50"
            &gt;
              {loading.posts ? '‚è≥' : 'üîÑ'}
            &lt;/button&gt;
          &lt;/div&gt;
          &lt;div className="text-3xl font-bold text-green-600"&gt;{posts.length}&lt;/div&gt;
          &lt;div className="text-sm text-gray-500"&gt;
            √öltima atualiza√ß√£o: {lastUpdate.posts || 'Nunca'}
          &lt;/div&gt;
        &lt;/div&gt;

        {/* Card de TODOs */}
        &lt;div className="bg-white p-6 rounded-lg shadow"&gt;
          &lt;div className="flex justify-between items-center mb-4"&gt;
            &lt;h3 className="text-lg font-semibold"&gt;TODOs&lt;/h3&gt;
            &lt;button
              onClick={() => refreshData('todos')}
              disabled={loading.todos}
              className="text-blue-500 hover:text-blue-700 disabled:opacity-50"
            &gt;
              {loading.todos ? '‚è≥' : 'üîÑ'}
            &lt;/button&gt;
          &lt;/div&gt;
          &lt;div className="text-3xl font-bold text-purple-600"&gt;{todos.length}&lt;/div&gt;
          &lt;div className="text-sm text-gray-500"&gt;
            √öltima atualiza√ß√£o: {lastUpdate.todos || 'Nunca'}
          &lt;/div&gt;
        &lt;/div&gt;
      &lt;/div&gt;

      {/* Gr√°fico simples */}
      &lt;div className="bg-white p-6 rounded-lg shadow"&gt;
        &lt;h3 className="text-lg font-semibold mb-4"&gt;Resumo dos Dados&lt;/h3&gt;
        &lt;div className="space-y-2"&gt;
          &lt;div className="flex justify-between"&gt;
            &lt;span&gt;Usu√°rios:&lt;/span&gt;
            &lt;span className="font-semibold"&gt;{users.length}&lt;/span&gt;
          &lt;/div&gt;
          &lt;div className="flex justify-between"&gt;
            &lt;span&gt;Posts:&lt;/span&gt;
            &lt;span className="font-semibold"&gt;{posts.length}&lt;/span&gt;
          &lt;/div&gt;
          &lt;div className="flex justify-between"&gt;
            &lt;span&gt;TODOs:&lt;/span&gt;
            &lt;span className="font-semibold"&gt;{todos.length}&lt;/span&gt;
          &lt;/div&gt;
          &lt;div className="flex justify-between"&gt;
            &lt;span&gt;Total:&lt;/span&gt;
            &lt;span className="font-semibold text-blue-600"&gt;
              {users.length + posts.length + todos.length}
            &lt;/span&gt;
          &lt;/div&gt;
        &lt;/div&gt;
      &lt;/div&gt;
    &lt;/div&gt;
  );
};

export default Dashboard;</code></pre>
      </details>
    </div>
  </section>

  <!-- 10. Resumo Final -->
  <section class="mb-5">
    <h3 class="section-title with-icon">
      <i class="fas fa-check-circle"></i> 10. Resumo Final
    </h3>
    <div class="card mb-4">
      <div class="card-body">
        <h4>O que foi Mantido do Projeto Anterior</h4>
        <ul>
          <li>
            ‚úÖ <strong>useMemo:</strong> Lista filtrada e estat√≠sticas
            otimizadas
          </li>
          <li>
            ‚úÖ <strong>useCallback:</strong> Handlers memoizados para
            performance
          </li>
          <li>‚úÖ <strong>useRef:</strong> Foco autom√°tico no formul√°rio</li>
          <li>
            ‚úÖ <strong>Componente Statistics:</strong> Separado e funcionando
          </li>
          <li>
            ‚úÖ <strong>Navega√ß√£o:</strong> P√°gina de detalhes dos contatos
          </li>
          <li>‚úÖ <strong>Filtros:</strong> Busca em tempo real</li>
          <li>
            ‚úÖ <strong>localStorage:</strong> Persist√™ncia local (agora como
            cache)
          </li>
        </ul>

        <h4>O que foi Adicionado Nesta Aula</h4>
        <ul>
          <li>
            üÜï <strong>axios:</strong> Biblioteca para requisi√ß√µes HTTP com
            interceptors
          </li>
          <li>
            üÜï <strong>useEffect para APIs:</strong> Gerenciar ciclo de vida das
            chamadas de API
          </li>
          <li>
            üÜï <strong>Estados de UI:</strong> Loading, erro e sucesso para
            melhor UX
          </li>
          <li>
            üÜï <strong>Cache Service:</strong> Sistema de cache com expira√ß√£o
          </li>
          <li>
            üÜï <strong>ConnectionStatus:</strong> Indicador visual de
            online/offline
          </li>
          <li>
            üÜï <strong>Sincroniza√ß√£o:</strong> Detectar status e sincronizar
            automaticamente
          </li>
          <li>
            üÜï <strong>API Integration:</strong> MockAPI.io para persist√™ncia
            real
          </li>
        </ul>

        <h4>Habilidades Desenvolvidas</h4>
        <ul>
          <li>Configurar e usar axios para requisi√ß√µes HTTP</li>
          <li>Implementar hooks customizados para APIs</li>
          <li>Criar sistemas de cache com expira√ß√£o</li>
          <li>Detectar e gerenciar status de conex√£o</li>
          <li>Implementar sincroniza√ß√£o offline/online</li>
          <li>Tratar erros e estados de loading adequadamente</li>
        </ul>

        <h4>Pr√≥ximos Passos</h4>
        <ul>
          <li>Estudar React Query para gerenciamento de estado de servidor</li>
          <li>Aprender sobre WebSockets para atualiza√ß√µes em tempo real</li>
          <li>Explorar Service Workers para cache avan√ßado</li>
          <li>Implementar testes para hooks de API</li>
          <li>Estudar sobre otimiza√ß√£o de performance em APIs</li>
        </ul>

        <div class="alert alert-success">
          <strong>Parab√©ns!</strong> Voc√™ agora sabe como integrar APIs em
          aplica√ß√µes React, implementar cache offline e sincroniza√ß√£o
          autom√°tica. Essas s√£o habilidades essenciais para desenvolvimento de
          aplica√ß√µes modernas!
        </div>
      </div>
    </div>
  </section>
</article>
